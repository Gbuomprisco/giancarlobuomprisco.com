<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/favicon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/favicon.png" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="msapplication-TileColor" content="#000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><meta name="author" content="Giancarlo Buomprisco"/><meta property="og:title" content="Giancarlo Buomprisco"/><meta name="description" content="Giancarlo Buomprisco&#x27;s Website"/><meta property="og:description" content="Giancarlo Buomprisco&#x27;s Website"/><meta property="og:site_name" content="giancarlobuomprisco.com"/><meta property="twitter:title" content="giancarlobuomprisco.com"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:creator" content="@gc_psk"/><title>Building Scalable Multi-Platform Projects with Angular and¬†Nx</title><meta property="twitter:title" content="Building Scalable Multi-Platform Projects with Angular and¬†Nx"/><meta property="og:description"/><meta property="article:published_time" content="2019-08-25T00:00:00.322Z"/><meta property="og:image" content="/assets/images/posts/scalable-multiplatform-monorepo.jpeg"/><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/2855f233c0066111.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2855f233c0066111.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9855952b284ee7c0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9855952b284ee7c0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-27593bf8d60abcde.js" defer=""></script><script src="/_next/static/chunks/framework-93dc06fa7fcdddfb.js" defer=""></script><script src="/_next/static/chunks/main-e47b4831833660b7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-64e11a95ea9f54b9.js" defer=""></script><script src="/_next/static/chunks/501-5650b991910e93a7.js" defer=""></script><script src="/_next/static/chunks/386-274412aa4b569ab8.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcollection%5D/%5Bslug%5D-99756abdaf97a823.js" defer=""></script><script src="/_next/static/SvILjQdRjmlyCsQQua78U/_buildManifest.js" defer=""></script><script src="/_next/static/SvILjQdRjmlyCsQQua78U/_ssgManifest.js" defer=""></script><script src="/_next/static/SvILjQdRjmlyCsQQua78U/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;600&display=swap">@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNTFM.woff) format('woff')}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFoWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFMWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFsWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFQWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFgWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFkWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFcWaDq8fMU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div><main><div style="--from:#dd00316e;--to:#e23236" class="collection-branding-bar_gradient__1Ie5x"></div><div class="container mx-auto px-5"><div class="flex-row flex justify-between items-center my-8 md:my-12"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-8 px-4 hidden flex-col lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="flex justify-end"><span class="rounded bg-gray-50 shadow-lg p-4">Close</span></div></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/articles">Articles</a></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/about">About</a></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/contact">Contact me</a></li></ul></div><article class="mb-16"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter md:leading-none mb-8 text-center">Building Scalable Multi-Platform Projects with Angular and¬†Nx</h1><div class="mb-4 flex justify-center"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:18px;height:18px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div><div class="max-w-2xl mx-auto mb-6"><div class="flex flex-row space-x-2 items-center justify-center"><div class="text-sm text-center text-gray-600"><time dateTime="2019-08-25T00:00:00.322Z">August	25, 2019</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600 text-sm">9 min read</span></div></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="mx-auto w-12/12 lg:w-10/12 xl:w-8/12 justify-center"><div class="sm:mx-0"><img style="width:100%;height:auto" class="shadow-small block" src="/assets/images/posts/scalable-multiplatform-monorepo.jpeg" alt="Cover Image for Building Scalable Multi-Platform Projects with Angular and¬†Nx" loading="lazy"/></div></div></div><div class="mb-12 max-w-2xl mx-auto"></div><div class="max-w-2xl mx-auto leading-loose"><div class="markdown-styles_markdown__1x9gM"><p>This article is a follow-up from my previous thought that I wrote on <a href="https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-an-enterprise-grade-angular-project-structure-f5be32533ba3%3Fsource%3D---------19------------------">building enterprise-scale projects in Angular</a>.</p>
<p>In the previous article, monorepos and Nx were mentioned but I had not yet had the pleasure to try them out. It was clear, that although the structure mentioned was decent enough for a single project targeting a single platform, it would have fallen short for sharing code with other projects.</p>
<h3>Monorepos to the¬†rescue</h3>
<p>In the past few months, I have been working on multiple projects‚Ää‚Äî‚Ääsome with a high degree of complexity; one of my projects required me to <strong>write an application that needs to be able to run on multiple platforms</strong>, which is one of the reasons why I felt the previous article needed an update:</p>
<ul>
<li>I want to ship a single project for multiple devices (mobile, desktop) sharing as much code as possible</li>
<li>I want my project‚Äôs <em>API</em> to share models with the client applications, in the same workspace</li>
<li>I want <em>SSR</em> (Server-Side Rendering) because, well, it‚Äôs 2019</li>
</ul>
<h3>What this article is¬†about</h3>
<p>Let‚Äôs face it - Building scalable projects is hard. I‚Äôm sure you had a similar conversation at least once in your career:¬†</p>
<ul>
<li><strong>You</strong>: Hey, where should we place these functions? It‚Äôs getting messy ü§î</li>
<li><strong>Colleague</strong>: Oh, just create (yet another) folder ‚Äúutils‚Äù and put it there üòê</li>
<li><strong>You</strong>: Okay‚Ä¶ üôÑ</li>
</ul>
<p>In the first part of this article, <strong>we‚Äôre going to discuss how Nx helps structure your applications</strong>, and how we can leverage it to build insanely scalable projects.</p>
<p>In the second part, we take a more hands-on approach: <strong>a step-by-step guide on setting up an Angular application</strong> that is server-side rendered with NestJS, sharing code with a mobile Ionic application. It took some time for me to get it all right, so I want to help you (and future me) to do it effortlessly.</p>
<h2>Tech Stack</h2>
<p>In order to do this, I will be using the following technologies:</p>
<ul>
<li><a href="https://medium.com/r/?url=https%3A%2F%2Fnx.dev%2Fangular"><strong>Nx Workspaces</strong></a>: without a doubt the best tool to manage monorepos with <em>Angular</em> projects. <em>Nx</em> augments the CLI and allows us to easily build multiple apps in the same repository with ease</li>
<li><strong>Ionic/xplat:</strong> Ionic is an awesome mobile framework for building cross-platform apps. Thanks to <a href="https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat">xPlat</a>, we will be able to easily create an Ionic app that integrates with <em>Nx</em></li>
<li><a href="https://medium.com/r/?url=https%3A%2F%2Fnestjs.com%2F"><strong>NestJS</strong></a>: a progressive <em>NodeJS</em> framework inspired by <em>Angular</em></li>
</ul>
<h2>Introduction to Nx Workspaces</h2>
<p>There are two reasons why you may want to use <em>Nx</em>:¬†</p>
<ul>
<li>you work with multiple teams and multiple projects that can share code together</li>
<li>or, you are obsessed with code organization like I am!</li>
</ul>
<p>Jokes aside, <em>Nx</em> is a wonderful tool that <strong>helps to organize code in a scalable fashion</strong>; even if you‚Äôre not planning on writing the next Facebook, the goodies provided by the <a href="https://medium.com/r/?url=https%3A%2F%2Fnrwl.io">Nrwl</a> team are enough of a reason for me to kickstart my projects with <em>Nx</em>.</p>
<h3>Applications</h3>
<p>Nx is a tool to create extensible mono-repository projects. If you have used the Angular CLI, <em>Nx</em> will look familiar, but with some differences.</p>
<p>Every application will be created within a folder called <code>/apps</code>, including your e2e tests project. For example, you may create apps written in <em>Angular</em>, <em>React</em>, <em>Ionic</em>, <em>Nativescript</em>, <em>Express</em>, <em>NestJS</em>, etc.</p>
<p>Or, <strong>all of them at once</strong>, sharing code!</p>
<h3>Libraries</h3>
<p>Your libraries, instead, will be placed within the folder <code>/libs</code>.</p>
<p>What exactly are they, though? Of course, small reusable pieces of code than any application within our workspace can use; but as <em>Nx</em> also says, <strong>libraries are smaller units of code with a well-defined API</strong>.</p>
<p>Libraries are ideal for sharing <strong>Angular Entities</strong> and <strong>Typescript Entities.</strong> For example:</p>
<ul>
<li>It is likely that you will want to share the same interfaces between front-end and back-end. Creating a lib called <code>models</code> will allow all your applications to access the same models without having to rewrite them twice</li>
<li>Your applications will likely make use of lots of components, pipes, directives, and services that will be common between all your applications: tests, mobile, front-office, back-office, etc.</li>
</ul>
<h3>Anatomy of an Nx Workspace</h3>
<p>The project structure below is the starting point of any Nx project:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">&#x26;lt;workspace name&#x26;gt;/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ myapp/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ environments/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ polyfills.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles.scss
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ browserslist
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jest.config.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.app.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.spec.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tslint.json
‚îÇ   ‚îî‚îÄ‚îÄ myapp-e2e/
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ fixtures/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ example.json
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.spec.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ plugins/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ support/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ app.po.ts
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ commands.ts
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ index.ts
‚îÇ       ‚îú‚îÄ‚îÄ cypress.json
‚îÇ       ‚îú‚îÄ‚îÄ tsconfig.e2e.json
‚îÇ       ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ       ‚îî‚îÄ‚îÄ tslint.json
‚îú‚îÄ‚îÄ libs/
‚îú‚îÄ‚îÄ tools/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ angular.json
‚îú‚îÄ‚îÄ nx.json
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ tslint.json</code></pre></div>
<h2>Working with Nx: Creating Applications</h2>
<p>Now that I (may have) convinced you to use <em>Nx</em> and <em>Angular</em>, I am going to show you, step-by-step, how to set up a dream tech-stack that I described above.</p>
<h3>Creating a new Nx Workspace with Angular and¬†Nest</h3>
<p>We will start with a few commands that will kickstart our project structure thanks to <em>Nx</em> until we will have a working monorepo project with the latest Angular version and <em>NestJS</em> as <em>NodeJs</em> framework.</p>
<p>The following command will generate a working monorepo project with the latest Angular version and NestJS as Server-Side Node framework:</p>
<p><img src="https://cdn-images-1.medium.com/max/2400/1*uhEP6aleLqbeyXYuptXvWg.png" alt=""></p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ new workspace --preset=&#x26;quot;angular-nest&#x26;quot; --appName=&#x26;quot;nx-angular-ssr&#x26;quot; --style=&#x26;quot;scss&#x26;quot; --collection=[@nrwl/workspace](https://medium.com/r/?url=http%3A%2F%2Ftwitter.com%2Fnrwl%2Fworkspace &#x26;quot;Twitter profile for @nrwl/workspace&#x26;quot;)</code></pre></div>
<p>The command line will prompt what style preprocessor you like, I‚Äôd recommend choosing <em>SCSS</em>.¬†
Sit tight, it will take a while. Nx will create a workspace in a folder named <code>workspace</code>.</p>
<h2>API and Server-Side Rendering</h2>
<p>NestJS provides an awesome CLI plugin in order to automatically prepare the application for server-side rendering.</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*4A3J6f6vjWzOPYGtfijqKQ.png" alt=""></p>
<p>Run the following command in the Nx workspace:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ ng add @nestjs/ng-universal</code></pre></div>
<p>When the command line prompts for the application name, enter <code>nx-angular-ssr</code>. The plugin will create a folder named <code>server</code>, but we already have a server application, so we will ignore that (that means, you can delete it). As expected, we need to do some changes.</p>
<h3>Importing Angular‚Äôs Universal Module</h3>
<p>The first thing to do is to import Angular Universal in our Nest application: to do that, we open the file <code>apps/api/app/app.module.ts</code> and we paste the following code to the imports array of the <code>AppModule</code> class:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">AngularUniversalModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  viewsPath<span class="token operator">:</span> <span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'dist/browser'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  bundle<span class="token operator">:</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'../server/main'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  liveReload<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Of course, don‚Äôt forget to import <code>AngularUniversalModule</code> and <code>join</code>.</p>
<h3>Fixing the environments` path</h3>
<p>We need to apply a small change to the <code>angular.json</code> configuration. Unfortunately, the path to the environments files is incorrect, so we patch it according to the real path, which is <code>apps/nx-angular-ssr/src/environments</code> as shown in the image below:</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*BJqLeuogbRK5Er5qzy6Tug.png" alt=""></p>
<h3>Adjust Webpack‚Äôs configuration</h3>
<p>The last thing we need to adjust is the server‚Äôs Webpack configuration. Open the file <code>webpack.server.config</code> and replace the content with the following snippet:</p>
<p>And at this point, it‚Äôs all done! We only need to build and run our application.</p>
<h3>Run the Server-Rendered Angular app Wih Nest¬†JS</h3>
<p>The NestJS plugin added some useful command to build and run the application. We first need to build the SSR application by running:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ npm run build:ssr</code></pre></div>
<p>And then, we‚Äôre able to serve it:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ npm run serve:ssr</code></pre></div>
<p>Open your browser at <code>http://localhost:3333</code> and there is your server-rendered <em>Angular</em> application powered by <em>NestJS</em>!</p>
<h2>Adding an Ionic application with¬†xPlat</h2>
<p><a href="https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat%2Fgetting-started%2Fgetting-started">xPlat</a> is a tool that extends Nx Workspaces with a set of generators that help kickstart projects written in <em>Electron</em>, <em>NativeScript</em>, and <em>Ionic</em>. In our case, we want to use it for generating a mobile application written using Ionic.</p>
<h3>Generating an Ionic¬†app</h3>
<p>In order to generate applications using xPlat, we need to install it first. Run this CLI command in your workspace root:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ng add @nstudio/xplat</code></pre></div>
<p>You will be prompted what sort of application you want to use:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">[] Electron
[] NativeScript
[-] Ionic</code></pre></div>
<p>In our case, we will choose Ionic for Angular projects (which will be asked in the next step).</p>
<p>We will then generate our application using the following command:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ ng generate app</code></pre></div>
<p>The CLI will prompt us for some configuration. Here are my choices below:</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*vUwvmpVe47N9wcoIV-ehAA.png" alt=""></p>
<p>When the CLI asks for the folder where the app will be located, enter an empty space, and it will be automatically placed within <code>apps</code>.</p>
<h3>Adding Capacitor</h3>
<p><em>Capacitor</em> is <em>Ionic‚Äôs</em> framework to build cross-platform applications. For some reason, it did not automatically get added, so we install it manually:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ npm i --save-dev @capacitor/core</code></pre></div>
<h3>Running the¬†app</h3>
<p>We will run the application in the same way we run any other CLI application. The only thing to notice is that <em>xPlat</em> prefixed the name of our application with the prefix <code>ionic-</code>.</p>
<p>Run the following command in order to run the Ionic app in the browser:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ ng serve ionic-mobile</code></pre></div>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*nrXO1F4fbIGGgTP_95RsEA.png" alt=""></p>
<h3>Sharing Code</h3>
<p>Now that the app is set-up and running, we want to start sharing code between our applications. An example of ideal code-sharing would be our state-management modules or a UI component library.</p>
<p>As we said earlier, all the code that we plan to share across the applications will be added as a library under the folder <code>libs</code>. The application generated by xPlat already sets up the paths for us to import libraries using virtual paths, but I wasn‚Äôt too happy with it.</p>
<p>The default virtual path in the tsconfig.json is set-up as follows:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">&#x26;quot;@workspace/*&#x26;quot;: [&#x26;quot;../../libs/*&#x26;quot;]</code></pre></div>
<p>Unfortunately, this makes us have to also write the whole path to the <code>src/lib/index.ts</code> barrel file, which is inconvenient. As a result, I decided to add the following paths in order to access the UI library more quickly:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">&#x26;quot;paths&#x26;quot;: {
    ...other paths,
    &#x26;quot;@workspace/ui&#x26;quot;: [&#x26;quot;../../libs/ui/src/index.ts&#x26;quot;],
    &#x26;quot;@workspace/ui/*&#x26;quot;: [&#x26;quot;../../libs/ui/src/*&#x26;quot;]
}</code></pre></div>
<p>Once that‚Äôs done, I open the file <code>home.module.ts</code> in our mobile application and import the UI library‚Äôs module:</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// other imports...
import { UiModule } from &#x26;#39;@workspace/ui&#x26;#39;;

@NgModule({
  imports: [SharedModule, HomeRoutingModule, UiModule],
  declarations: [HomeComponent],
  schemas: [CUSTOM_ELEMENTS_SCHEMA]
})
export class HomeModule {}</code></pre></div>
<p>Our home route in the Ionic application has now access to the components developed in parallel with the other platforms!</p>
<h3>Not just¬†Ionic</h3>
<p>As we said, <em>xPlat</em> also allows you to build for other platforms, such as <em>NativeScript</em> and <em>Electron</em> (and who know what else in the future!).¬†</p>
<p>As a result, the code could be shared between even more applications.</p>
<h2>Final Words</h2>
<p>Building a large project, able to share code and scale across multiple teams is surely no easy feat.</p>
<p>Monorepo architectures allow us to work in parallel and easily share code, and Nx makes managing the monorepo a much easier job than it would be otherwise.</p>
<p>This article showed you an example of how we can achieve a dream tech-stack with awesome technologies such as <em>NestJS</em> and <em>Ionic</em>, accelerate processes, maximize code reusability and organize a scalable project structure thanks to <em>Nx.</em></p>
<h3>References and Related¬†Reading</h3>
<ul>
<li><a href="https://medium.com/r/?url=https%3A%2F%2Fnx.dev%2Fangular">Nx</a></li>
<li><a href="https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat">XPlat</a></li>
<li><a href="https://medium.com/r/?url=https%3A%2F%2Fblog.nrwl.io%2Fmisconceptions-about-monorepos-monorepo-monolith-df1250d4b03c">Misconceptions about Monorepos: Monorepo¬†!= Monolith</a> by Victor Savkin</li>
</ul>
<p>If you need any clarifications, or if you think something is unclear or wrong, do please leave a comment!</p>
</div></div></article><div class="max-w-2xl mx-auto"></div><div class="w-full md:w-8/12 mx-auto"><script async="" data-uid="3e3126f064" src="https://thoughtful-inventor-7842.ck.page/3e3126f064/index.js"></script></div><div><hr class="border-accent-2 mt-16 mb-14"/><h3 class="text-2xl md:text-3xl text-center font-semibold my-4 md:my-12 flex flex-row space-x-4 items-center justify-center"><span>More Posts for</span> <div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:28px;height:28px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></h3><section><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 md:gap-x-12 lg:gap-x-16 gap-y-20 md:gap-y-24 mb-32"><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Benchmarking Angular 12 with Webpack 5" href="/angular/webpack-5-angular12"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/benchmarking-webpack-5.webp" alt="Cover Image for Benchmarking Angular 12 with Webpack 5" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/webpack-5-angular12">Benchmarking Angular 12 with Webpack 5</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2021-05-14T00:00:00.322Z">May	14, 2021</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">2 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Angular 12 has been released and with it the much awaited Webpack 5 upgrade. In this post I benchmarked the bundle-size and compilation speed against the previous version</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Principles for creating libraries with Nx and Angular" href="/angular/how-to-organize-nx-modules-with-angular"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/organize-nx-modules-ngrx.webp" alt="Cover Image for Principles for creating libraries with Nx and Angular" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/how-to-organize-nx-modules-with-angular">Principles for creating libraries with Nx and Angular</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2021-02-07T00:00:00.322Z">February	7, 2021</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Working with Nx may be confusing. This article explains how I create Nx libraries and the principles behind my motivations</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Where to put your Angular models?" href="/angular/angular-where-to-put-models"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/where-put-angular-models.webp" alt="Cover Image for Where to put your Angular models?" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/angular-where-to-put-models">Where to put your Angular models?</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-08-03T00:00:00.322Z">August	3, 2020</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Organizing entities and models in your Angular app may be hard. This article explains where to put your entities and what mistakes to watch out for</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Using the Intersection Observer API with Angular" href="/angular/intersection-observer-with-angular"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/intersection-observer.webp" alt="Cover Image for Using the Intersection Observer API with Angular" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/intersection-observer-with-angular">Using the Intersection Observer API with Angular</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-08-01T00:00:00.322Z">August	1, 2020</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">This article shows how to build a directive with Angular that uses the Intersection Observer API to check when an element becomes visible on the page</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Setters vs ngOnChanges: which one is better?" href="/angular/setters-vs-ng-on-changes"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/setters-vs-on-changes.webp" alt="Cover Image for Setters vs ngOnChanges: which one is better?" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/setters-vs-ng-on-changes">Setters vs ngOnChanges: which one is better?</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-07-30T00:00:00.322Z">July	30, 2020</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Listening to Input changes can be done in different ways. But which one should you use?</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Async Rendering with a single Rx Operator" href="/angular/async-rendering-with-a-single-rx-operator"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/async-rendering.webp" alt="Cover Image for Async Rendering with a single Rx Operator" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/async-rendering-with-a-single-rx-operator">Async Rendering with a single Rx Operator</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-07-11T00:00:00.322Z">July	11, 2020</time></div><span class="text-gray-600">¬∑</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">¬∑</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Increase your app rendering performance with this simple Rx operator</p></div></div></section></div></div></main></div><footer><div class="container mx-auto px-5"><hr class="border-accent-2 mt-16 mb-14"/><div class="flex-row flex justify-between items-center my-8 md:my-12"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-8 px-4 hidden flex-col lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="flex justify-end"><span class="rounded bg-gray-50 shadow-lg p-4">Close</span></div></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/articles">Articles</a></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/about">About</a></li><li class="active:text-black text-gray-800 hover:text-gray-900 font-medium hover:underline"><a href="/contact">Contact me</a></li></ul></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"readingTime":"9 min read","live":true,"title":"Building Scalable Multi-Platform Projects with Angular and¬†Nx","date":"2019-08-25T00:00:00.322Z","slug":"building-scalable-multi-platform-projects-with-angular-and-nx","content":"\u003cp\u003eThis article is a follow-up from my previous thought that I wrote on \u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-an-enterprise-grade-angular-project-structure-f5be32533ba3%3Fsource%3D---------19------------------\"\u003ebuilding enterprise-scale projects in Angular\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIn the previous article, monorepos and Nx were mentioned but I had not yet had the pleasure to try them out. It was clear, that although the structure mentioned was decent enough for a single project targeting a single platform, it would have fallen short for sharing code with other projects.\u003c/p\u003e\n\u003ch3\u003eMonorepos to the¬†rescue\u003c/h3\u003e\n\u003cp\u003eIn the past few months, I have been working on multiple projects‚Ää‚Äî‚Ääsome with a high degree of complexity; one of my projects required me to \u003cstrong\u003ewrite an application that needs to be able to run on multiple platforms\u003c/strong\u003e, which is one of the reasons why I felt the previous article needed an update:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eI want to ship a single project for multiple devices (mobile, desktop) sharing as much code as possible\u003c/li\u003e\n\u003cli\u003eI want my project‚Äôs \u003cem\u003eAPI\u003c/em\u003e to share models with the client applications, in the same workspace\u003c/li\u003e\n\u003cli\u003eI want \u003cem\u003eSSR\u003c/em\u003e (Server-Side Rendering) because, well, it‚Äôs 2019\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eWhat this article is¬†about\u003c/h3\u003e\n\u003cp\u003eLet‚Äôs face it - Building scalable projects is hard. I‚Äôm sure you had a similar conversation at least once in your career:¬†\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eYou\u003c/strong\u003e: Hey, where should we place these functions? It‚Äôs getting messy ü§î\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eColleague\u003c/strong\u003e: Oh, just create (yet another) folder ‚Äúutils‚Äù and put it there üòê\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eYou\u003c/strong\u003e: Okay‚Ä¶ üôÑ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn the first part of this article, \u003cstrong\u003ewe‚Äôre going to discuss how Nx helps structure your applications\u003c/strong\u003e, and how we can leverage it to build insanely scalable projects.\u003c/p\u003e\n\u003cp\u003eIn the second part, we take a more hands-on approach: \u003cstrong\u003ea step-by-step guide on setting up an Angular application\u003c/strong\u003e that is server-side rendered with NestJS, sharing code with a mobile Ionic application. It took some time for me to get it all right, so I want to help you (and future me) to do it effortlessly.\u003c/p\u003e\n\u003ch2\u003eTech Stack\u003c/h2\u003e\n\u003cp\u003eIn order to do this, I will be using the following technologies:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnx.dev%2Fangular\"\u003e\u003cstrong\u003eNx Workspaces\u003c/strong\u003e\u003c/a\u003e: without a doubt the best tool to manage monorepos with \u003cem\u003eAngular\u003c/em\u003e projects. \u003cem\u003eNx\u003c/em\u003e augments the CLI and allows us to easily build multiple apps in the same repository with ease\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eIonic/xplat:\u003c/strong\u003e Ionic is an awesome mobile framework for building cross-platform apps. Thanks to \u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat\"\u003exPlat\u003c/a\u003e, we will be able to easily create an Ionic app that integrates with \u003cem\u003eNx\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnestjs.com%2F\"\u003e\u003cstrong\u003eNestJS\u003c/strong\u003e\u003c/a\u003e: a progressive \u003cem\u003eNodeJS\u003c/em\u003e framework inspired by \u003cem\u003eAngular\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eIntroduction to Nx Workspaces\u003c/h2\u003e\n\u003cp\u003eThere are two reasons why you may want to use \u003cem\u003eNx\u003c/em\u003e:¬†\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eyou work with multiple teams and multiple projects that can share code together\u003c/li\u003e\n\u003cli\u003eor, you are obsessed with code organization like I am!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJokes aside, \u003cem\u003eNx\u003c/em\u003e is a wonderful tool that \u003cstrong\u003ehelps to organize code in a scalable fashion\u003c/strong\u003e; even if you‚Äôre not planning on writing the next Facebook, the goodies provided by the \u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnrwl.io\"\u003eNrwl\u003c/a\u003e team are enough of a reason for me to kickstart my projects with \u003cem\u003eNx\u003c/em\u003e.\u003c/p\u003e\n\u003ch3\u003eApplications\u003c/h3\u003e\n\u003cp\u003eNx is a tool to create extensible mono-repository projects. If you have used the Angular CLI, \u003cem\u003eNx\u003c/em\u003e will look familiar, but with some differences.\u003c/p\u003e\n\u003cp\u003eEvery application will be created within a folder called \u003ccode\u003e/apps\u003c/code\u003e, including your e2e tests project. For example, you may create apps written in \u003cem\u003eAngular\u003c/em\u003e, \u003cem\u003eReact\u003c/em\u003e, \u003cem\u003eIonic\u003c/em\u003e, \u003cem\u003eNativescript\u003c/em\u003e, \u003cem\u003eExpress\u003c/em\u003e, \u003cem\u003eNestJS\u003c/em\u003e, etc.\u003c/p\u003e\n\u003cp\u003eOr, \u003cstrong\u003eall of them at once\u003c/strong\u003e, sharing code!\u003c/p\u003e\n\u003ch3\u003eLibraries\u003c/h3\u003e\n\u003cp\u003eYour libraries, instead, will be placed within the folder \u003ccode\u003e/libs\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eWhat exactly are they, though? Of course, small reusable pieces of code than any application within our workspace can use; but as \u003cem\u003eNx\u003c/em\u003e also says, \u003cstrong\u003elibraries are smaller units of code with a well-defined API\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eLibraries are ideal for sharing \u003cstrong\u003eAngular Entities\u003c/strong\u003e and \u003cstrong\u003eTypescript Entities.\u003c/strong\u003e For example:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt is likely that you will want to share the same interfaces between front-end and back-end. Creating a lib called \u003ccode\u003emodels\u003c/code\u003e will allow all your applications to access the same models without having to rewrite them twice\u003c/li\u003e\n\u003cli\u003eYour applications will likely make use of lots of components, pipes, directives, and services that will be common between all your applications: tests, mobile, front-office, back-office, etc.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAnatomy of an Nx Workspace\u003c/h3\u003e\n\u003cp\u003eThe project structure below is the starting point of any Nx project:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e\u0026#x26;lt;workspace name\u0026#x26;gt;/\n‚îú‚îÄ‚îÄ apps/\n‚îÇ   ‚îú‚îÄ‚îÄ myapp/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ environments/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ polyfills.ts\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles.scss\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test.ts\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ browserslist\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jest.config.js\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.app.json\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.spec.json\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tslint.json\n‚îÇ   ‚îî‚îÄ‚îÄ myapp-e2e/\n‚îÇ       ‚îú‚îÄ‚îÄ src/\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ fixtures/\n‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ example.json\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ integration/\n‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.spec.ts\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ plugins/\n‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts\n‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ support/\n‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ app.po.ts\n‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ commands.ts\n‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ index.ts\n‚îÇ       ‚îú‚îÄ‚îÄ cypress.json\n‚îÇ       ‚îú‚îÄ‚îÄ tsconfig.e2e.json\n‚îÇ       ‚îú‚îÄ‚îÄ tsconfig.json\n‚îÇ       ‚îî‚îÄ‚îÄ tslint.json\n‚îú‚îÄ‚îÄ libs/\n‚îú‚îÄ‚îÄ tools/\n‚îú‚îÄ‚îÄ README.md\n‚îú‚îÄ‚îÄ angular.json\n‚îú‚îÄ‚îÄ nx.json\n‚îú‚îÄ‚îÄ package.json\n‚îú‚îÄ‚îÄ tsconfig.json\n‚îî‚îÄ‚îÄ tslint.json\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eWorking with Nx: Creating Applications\u003c/h2\u003e\n\u003cp\u003eNow that I (may have) convinced you to use \u003cem\u003eNx\u003c/em\u003e and \u003cem\u003eAngular\u003c/em\u003e, I am going to show you, step-by-step, how to set up a dream tech-stack that I described above.\u003c/p\u003e\n\u003ch3\u003eCreating a new Nx Workspace with Angular and¬†Nest\u003c/h3\u003e\n\u003cp\u003eWe will start with a few commands that will kickstart our project structure thanks to \u003cem\u003eNx\u003c/em\u003e until we will have a working monorepo project with the latest Angular version and \u003cem\u003eNestJS\u003c/em\u003e as \u003cem\u003eNodeJs\u003c/em\u003e framework.\u003c/p\u003e\n\u003cp\u003eThe following command will generate a working monorepo project with the latest Angular version and NestJS as Server-Side Node framework:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/2400/1*uhEP6aleLqbeyXYuptXvWg.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ new workspace --preset=\u0026#x26;quot;angular-nest\u0026#x26;quot; --appName=\u0026#x26;quot;nx-angular-ssr\u0026#x26;quot; --style=\u0026#x26;quot;scss\u0026#x26;quot; --collection=[@nrwl/workspace](https://medium.com/r/?url=http%3A%2F%2Ftwitter.com%2Fnrwl%2Fworkspace \u0026#x26;quot;Twitter profile for @nrwl/workspace\u0026#x26;quot;)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe command line will prompt what style preprocessor you like, I‚Äôd recommend choosing \u003cem\u003eSCSS\u003c/em\u003e.¬†\nSit tight, it will take a while. Nx will create a workspace in a folder named \u003ccode\u003eworkspace\u003c/code\u003e.\u003c/p\u003e\n\u003ch2\u003eAPI and Server-Side Rendering\u003c/h2\u003e\n\u003cp\u003eNestJS provides an awesome CLI plugin in order to automatically prepare the application for server-side rendering.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/1600/1*4A3J6f6vjWzOPYGtfijqKQ.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eRun the following command in the Nx workspace:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ ng add @nestjs/ng-universal\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWhen the command line prompts for the application name, enter \u003ccode\u003enx-angular-ssr\u003c/code\u003e. The plugin will create a folder named \u003ccode\u003eserver\u003c/code\u003e, but we already have a server application, so we will ignore that (that means, you can delete it). As expected, we need to do some changes.\u003c/p\u003e\n\u003ch3\u003eImporting Angular‚Äôs Universal Module\u003c/h3\u003e\n\u003cp\u003eThe first thing to do is to import Angular Universal in our Nest application: to do that, we open the file \u003ccode\u003eapps/api/app/app.module.ts\u003c/code\u003e and we paste the following code to the imports array of the \u003ccode\u003eAppModule\u003c/code\u003e class:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-typescript\"\u003e\u003ccode class=\"language-typescript\"\u003eAngularUniversalModule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eforRoot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  viewsPath\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eprocess\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecwd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'dist/browser'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  bundle\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../server/main'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  liveReload\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOf course, don‚Äôt forget to import \u003ccode\u003eAngularUniversalModule\u003c/code\u003e and \u003ccode\u003ejoin\u003c/code\u003e.\u003c/p\u003e\n\u003ch3\u003eFixing the environments` path\u003c/h3\u003e\n\u003cp\u003eWe need to apply a small change to the \u003ccode\u003eangular.json\u003c/code\u003e configuration. Unfortunately, the path to the environments files is incorrect, so we patch it according to the real path, which is \u003ccode\u003eapps/nx-angular-ssr/src/environments\u003c/code\u003e as shown in the image below:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/1600/1*BJqLeuogbRK5Er5qzy6Tug.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3\u003eAdjust Webpack‚Äôs configuration\u003c/h3\u003e\n\u003cp\u003eThe last thing we need to adjust is the server‚Äôs Webpack configuration. Open the file \u003ccode\u003ewebpack.server.config\u003c/code\u003e and replace the content with the following snippet:\u003c/p\u003e\n\u003cp\u003eAnd at this point, it‚Äôs all done! We only need to build and run our application.\u003c/p\u003e\n\u003ch3\u003eRun the Server-Rendered Angular app Wih Nest¬†JS\u003c/h3\u003e\n\u003cp\u003eThe NestJS plugin added some useful command to build and run the application. We first need to build the SSR application by running:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ npm run build:ssr\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eAnd then, we‚Äôre able to serve it:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ npm run serve:ssr\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOpen your browser at \u003ccode\u003ehttp://localhost:3333\u003c/code\u003e and there is your server-rendered \u003cem\u003eAngular\u003c/em\u003e application powered by \u003cem\u003eNestJS\u003c/em\u003e!\u003c/p\u003e\n\u003ch2\u003eAdding an Ionic application with¬†xPlat\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat%2Fgetting-started%2Fgetting-started\"\u003exPlat\u003c/a\u003e is a tool that extends Nx Workspaces with a set of generators that help kickstart projects written in \u003cem\u003eElectron\u003c/em\u003e, \u003cem\u003eNativeScript\u003c/em\u003e, and \u003cem\u003eIonic\u003c/em\u003e. In our case, we want to use it for generating a mobile application written using Ionic.\u003c/p\u003e\n\u003ch3\u003eGenerating an Ionic¬†app\u003c/h3\u003e\n\u003cp\u003eIn order to generate applications using xPlat, we need to install it first. Run this CLI command in your workspace root:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eng add @nstudio/xplat\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eYou will be prompted what sort of application you want to use:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e[] Electron\n[] NativeScript\n[-] Ionic\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIn our case, we will choose Ionic for Angular projects (which will be asked in the next step).\u003c/p\u003e\n\u003cp\u003eWe will then generate our application using the following command:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ ng generate app\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThe CLI will prompt us for some configuration. Here are my choices below:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/1600/1*vUwvmpVe47N9wcoIV-ehAA.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen the CLI asks for the folder where the app will be located, enter an empty space, and it will be automatically placed within \u003ccode\u003eapps\u003c/code\u003e.\u003c/p\u003e\n\u003ch3\u003eAdding Capacitor\u003c/h3\u003e\n\u003cp\u003e\u003cem\u003eCapacitor\u003c/em\u003e is \u003cem\u003eIonic‚Äôs\u003c/em\u003e framework to build cross-platform applications. For some reason, it did not automatically get added, so we install it manually:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ npm i --save-dev @capacitor/core\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003eRunning the¬†app\u003c/h3\u003e\n\u003cp\u003eWe will run the application in the same way we run any other CLI application. The only thing to notice is that \u003cem\u003exPlat\u003c/em\u003e prefixed the name of our application with the prefix \u003ccode\u003eionic-\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eRun the following command in order to run the Ionic app in the browser:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ ng serve ionic-mobile\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn-images-1.medium.com/max/1600/1*nrXO1F4fbIGGgTP_95RsEA.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3\u003eSharing Code\u003c/h3\u003e\n\u003cp\u003eNow that the app is set-up and running, we want to start sharing code between our applications. An example of ideal code-sharing would be our state-management modules or a UI component library.\u003c/p\u003e\n\u003cp\u003eAs we said earlier, all the code that we plan to share across the applications will be added as a library under the folder \u003ccode\u003elibs\u003c/code\u003e. The application generated by xPlat already sets up the paths for us to import libraries using virtual paths, but I wasn‚Äôt too happy with it.\u003c/p\u003e\n\u003cp\u003eThe default virtual path in the tsconfig.json is set-up as follows:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e\u0026#x26;quot;@workspace/*\u0026#x26;quot;: [\u0026#x26;quot;../../libs/*\u0026#x26;quot;]\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eUnfortunately, this makes us have to also write the whole path to the \u003ccode\u003esrc/lib/index.ts\u003c/code\u003e barrel file, which is inconvenient. As a result, I decided to add the following paths in order to access the UI library more quickly:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e\u0026#x26;quot;paths\u0026#x26;quot;: {\n    ...other paths,\n    \u0026#x26;quot;@workspace/ui\u0026#x26;quot;: [\u0026#x26;quot;../../libs/ui/src/index.ts\u0026#x26;quot;],\n    \u0026#x26;quot;@workspace/ui/*\u0026#x26;quot;: [\u0026#x26;quot;../../libs/ui/src/*\u0026#x26;quot;]\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOnce that‚Äôs done, I open the file \u003ccode\u003ehome.module.ts\u003c/code\u003e in our mobile application and import the UI library‚Äôs module:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e// other imports...\nimport { UiModule } from \u0026#x26;#39;@workspace/ui\u0026#x26;#39;;\n\n@NgModule({\n  imports: [SharedModule, HomeRoutingModule, UiModule],\n  declarations: [HomeComponent],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class HomeModule {}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eOur home route in the Ionic application has now access to the components developed in parallel with the other platforms!\u003c/p\u003e\n\u003ch3\u003eNot just¬†Ionic\u003c/h3\u003e\n\u003cp\u003eAs we said, \u003cem\u003exPlat\u003c/em\u003e also allows you to build for other platforms, such as \u003cem\u003eNativeScript\u003c/em\u003e and \u003cem\u003eElectron\u003c/em\u003e (and who know what else in the future!).¬†\u003c/p\u003e\n\u003cp\u003eAs a result, the code could be shared between even more applications.\u003c/p\u003e\n\u003ch2\u003eFinal Words\u003c/h2\u003e\n\u003cp\u003eBuilding a large project, able to share code and scale across multiple teams is surely no easy feat.\u003c/p\u003e\n\u003cp\u003eMonorepo architectures allow us to work in parallel and easily share code, and Nx makes managing the monorepo a much easier job than it would be otherwise.\u003c/p\u003e\n\u003cp\u003eThis article showed you an example of how we can achieve a dream tech-stack with awesome technologies such as \u003cem\u003eNestJS\u003c/em\u003e and \u003cem\u003eIonic\u003c/em\u003e, accelerate processes, maximize code reusability and organize a scalable project structure thanks to \u003cem\u003eNx.\u003c/em\u003e\u003c/p\u003e\n\u003ch3\u003eReferences and Related¬†Reading\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnx.dev%2Fangular\"\u003eNx\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fnstudio.io%2Fxplat\"\u003eXPlat\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/r/?url=https%3A%2F%2Fblog.nrwl.io%2Fmisconceptions-about-monorepos-monorepo-monolith-df1250d4b03c\"\u003eMisconceptions about Monorepos: Monorepo¬†!= Monolith\u003c/a\u003e by Victor Savkin\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you need any clarifications, or if you think something is unclear or wrong, do please leave a comment!\u003c/p\u003e\n","coverImage":"/assets/images/posts/scalable-multiplatform-monorepo.jpeg","collection":"angular"},"series":[],"morePosts":[{"readingTime":"2 min read","live":true,"title":"Benchmarking Angular 12 with Webpack 5","date":"2021-05-14T00:00:00.322Z","slug":"webpack-5-angular12","coverImage":"/assets/images/posts/benchmarking-webpack-5.webp","collection":"angular","excerpt":"Angular 12 has been released and with it the much awaited Webpack 5 upgrade. In this post I benchmarked the bundle-size and compilation speed against the previous version"},{"readingTime":"5 min read","live":true,"title":"Principles for creating libraries with Nx and Angular","date":"2021-02-07T00:00:00.322Z","slug":"how-to-organize-nx-modules-with-angular","coverImage":"/assets/images/posts/organize-nx-modules-ngrx.webp","collection":"angular","excerpt":"Working with Nx may be confusing. This article explains how I create Nx libraries and the principles behind my motivations"},{"readingTime":"3 min read","live":true,"title":"Where to put your Angular models?","date":"2020-08-03T00:00:00.322Z","slug":"angular-where-to-put-models","ogImage":{"url":"/assets/images/posts/where-put-angular-models.png"},"coverImage":"/assets/images/posts/where-put-angular-models.webp","collection":"angular","excerpt":"Organizing entities and models in your Angular app may be hard. This article explains where to put your entities and what mistakes to watch out for"},{"readingTime":"5 min read","live":true,"title":"Using the Intersection Observer API with Angular","date":"2020-08-01T00:00:00.322Z","slug":"intersection-observer-with-angular","coverImage":"/assets/images/posts/intersection-observer.webp","collection":"angular","excerpt":"This article shows how to build a directive with Angular that uses the Intersection Observer API to check when an element becomes visible on the page"},{"readingTime":"3 min read","live":true,"title":"Setters vs ngOnChanges: which one is better?","date":"2020-07-30T00:00:00.322Z","slug":"setters-vs-ng-on-changes","coverImage":"/assets/images/posts/setters-vs-on-changes.webp","collection":"angular","excerpt":"Listening to Input changes can be done in different ways. But which one should you use?"},{"readingTime":"3 min read","live":true,"title":"Async Rendering with a single Rx Operator","date":"2020-07-11T00:00:00.322Z","slug":"async-rendering-with-a-single-rx-operator","coverImage":"/assets/images/posts/async-rendering.webp","collection":"angular","excerpt":"Increase your app rendering performance with this simple Rx operator"}]},"__N_SSG":true},"page":"/[collection]/[slug]","query":{"collection":"angular","slug":"building-scalable-multi-platform-projects-with-angular-and-nx"},"buildId":"SvILjQdRjmlyCsQQua78U","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>