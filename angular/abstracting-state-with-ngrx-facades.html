<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/favicon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/favicon.png" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="msapplication-TileColor" content="#000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><meta name="author" content="Giancarlo Buomprisco"/><meta property="og:title" content="Giancarlo Buomprisco"/><meta name="description" content="Giancarlo Buomprisco&#x27;s Website"/><meta property="og:description" content="Giancarlo Buomprisco&#x27;s Website"/><meta property="og:site_name" content="giancarlobuomprisco.com"/><meta property="twitter:title" content="giancarlobuomprisco.com"/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:creator" content="@gc_psk"/><title>State Management with NgRx: Abstracting State with Facades</title><meta property="twitter:title" content="State Management with NgRx: Abstracting State with Facades"/><meta property="article:published_time" content="2019-06-27T00:00:00.322Z"/><meta property="og:description" content="Using Ngrx facades to connect your components with your state"/><meta property="og:image" content="/assets/images/posts/state-management-with-ngrx.png"/><meta name="next-head-count" content="27"/><link rel="preload" href="/_next/static/css/b863cceb22cfa67a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b863cceb22cfa67a.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9f7355eb040862a5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9f7355eb040862a5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-27593bf8d60abcde.js" defer=""></script><script src="/_next/static/chunks/framework-93dc06fa7fcdddfb.js" defer=""></script><script src="/_next/static/chunks/main-e47b4831833660b7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-64e11a95ea9f54b9.js" defer=""></script><script src="/_next/static/chunks/501-5650b991910e93a7.js" defer=""></script><script src="/_next/static/chunks/663-cedf254e1084dd42.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcollection%5D/%5Bslug%5D-30ed0e2b664d1575.js" defer=""></script><script src="/_next/static/bodhziYrfVPHpHIu8xm2-/_buildManifest.js" defer=""></script><script src="/_next/static/bodhziYrfVPHpHIu8xm2-/_ssgManifest.js" defer=""></script><script src="/_next/static/bodhziYrfVPHpHIu8xm2-/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;600&display=swap">@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNTFM.woff) format('woff')}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFoWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFMWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFsWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFQWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFgWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFkWaDq8fMVxMw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Noto Serif';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/notoserif/v16/ga6Iaw1J5X9T9RW6j9bNfFcWaDq8fMU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:800;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v3/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div><main><div style="--from:#dd00316e;--to:#e23236" class="collection-branding-bar_gradient__1Ie5x"></div><div class="container mx-auto px-5"><div class="flex-row flex justify-between items-center my-8 md:my-12"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-8 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="flex justify-end"><span class="rounded bg-gray-50 shadow-lg p-4">Close</span></div></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/blog">Blog</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/articles">Articles</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/about">About</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/contact">Contact me</a></li></ul></div><article class="mb-16" style="--accent:#e23236;--accent-light:#dd00316e"><h1 class="text-4xl md:text-6xl lg:text-7xl font-bold tracking-tighter mb-4 text-center" style="color:#e23236;line-height:1.2">State Management with NgRx</h1><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter md:leading-none mb-8 text-center">Abstracting State with Facades</h1><div class="mb-4 flex justify-center"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:18px;height:18px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div><div class="max-w-2xl mx-auto mb-6"><div class="flex flex-row space-x-2 items-center justify-center"><div class="text-sm text-center text-gray-600"><time dateTime="2019-06-27T00:00:00.322Z">June	27, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600 text-sm">10 min read</span></div></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="mx-auto w-12/12 lg:w-10/12 xl:w-8/12 justify-center"><div class="sm:mx-0"><img style="width:100%;height:auto" class="shadow-small block" src="/assets/images/posts/state-management-with-ngrx.png" alt="Cover Image for Abstracting State with Facades" loading="lazy"/></div></div></div><div class="mb-12 max-w-2xl mx-auto"><div class="mx-auto flex flex-col"><h3 class="font-medium text-lg md:text-2xl mb-4"><b class="font-bold">State Management with NgRx<!-- --> (<!-- -->4<!-- --> Part Series)</b></h3><div class="flex flex-col space-y-4"><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/state-management-with-ngrx-introduction"><span>1</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/state-management-with-ngrx-introduction">Introduction</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-05-02T00:00:00.322Z">May	2, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">9 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/architecting-the-store-in-ngrx"><span>2</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/architecting-the-store-in-ngrx">Architecting the Store</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-05-05T00:00:00.322Z">May	5, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">10 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/building-side-effects-in-ngrx"><span>3</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/building-side-effects-in-ngrx">Building Side Effects</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-06-05T00:00:00.322Z">June	5, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">6 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div style="background-color:#e23236" class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center font-bold text-white" href="/angular/abstracting-state-with-ngrx-facades"><span>4</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-bold" href="/angular/abstracting-state-with-ngrx-facades">Abstracting State with Facades</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-06-27T00:00:00.322Z">June	27, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">10 min read</span></div></div></div></div></div></div><div class="max-w-2xl mx-auto leading-loose markdown-styles_markdown__1x9gM"><p>This is the fourth and last article of a series that aims to explain in detail a step-by-step approach to building an Angular application with NGRX.</p><ul><li>In <a href="https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fstate-management-with-ngrx-introduction-1aae0803e988" target="_blank" rel="noopener noreferrer">the first article of this series</a>, I wrote a small overview of all the concepts surrounding the NGRX platform.</li><li>In <a href="https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Farchitecting-the-store-in-ngrx-e4955641d746" target="_blank" rel="noopener noreferrer">the second article of this series</a>, I started writing the store of the application and the state’s entities.</li><li>In <a href="https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d" target="_blank" rel="noopener noreferrer">the third article of this series</a>, we built the effects that are responsible for fetching assets and prices from Coincap’s API</li></ul><h3>Summary</h3><p>Just to summarise what I introduced in the previous articles, we have an application that aims to display a dashboard with cryptocurrencies prices.</p><p>The application’s logic is built using three service modules, each module manages a different feature of our store.</p><p>These are:</p><ul><li><strong>dashboard</strong>, that manages the logic of the dashboard and its tiles</li><li><strong>assets,</strong> a list of assets fetched from <a href="https://medium.com/r/?url=https%3A%2F%2Fcoincap.io" target="_blank" rel="noopener noreferrer">Coincap’s</a> API</li><li><strong>prices,</strong> a stream of prices from Coincap’s WebSocket API</li></ul><p><strong>What the app will look like:</strong></p><p><img class=" shadow-lg my-4 rounded-lg" src="https://cdn-images-1.medium.com/max/1600/1*R3-0VFvXB2rq-rAtWyNwxA.gif" loading="lazy"/></p><p>Type caption for image (optional)</p><h3>In this article we will be learning:</h3><ul><li>what a Facade service is and how we apply it to NGRX</li><li>creating lean UI components that are connected with the <em>Store</em> using <strong>Facades</strong></li></ul><h2>What’s a Facade?</h2><p>A <em>Facade</em>, in terms of software engineering, is implemented as an object that offers a unified and simpler interface behind a more complex system. </p><p>In other terms, it abstracts the complex system (<em>NGRX</em>) behind a single <em>Service</em>.</p><p>How is that useful for us?</p><ul><li>we abstract UI components from the State Management used</li><li>we simplify the interfaces using clear, small methods</li><li>we minimize the number of dependencies used by a component</li><li>we provide a central service to fetch data and dispatch commands</li></ul><h3>Advantages</h3><ul><li><strong>Abstraction</strong>
Let’s say we start this project using <em>NGRX</em> and one day we decide to switch to <em>NGXS</em>, <em>Akita</em>, or some other State Management tooling. By using facades, we never have to refactor components and services that rely on the library used.</li><li><strong>Simplicity</strong>
A facade will hide away the technicalities and implementation of the library we use from the consumers, which result in components being lean and simple.</li><li><strong>Reusability</strong>
A facade will help with reusing some of the code used to dispatch and create actions, or select fragments from the store, as you never need to write that twice.</li></ul><p>Of course, there are also some disadvantages to using Facade Services with NGRX, and I’d recommend you to the article <a href="https://medium.com/r/?url=https%3A%2F%2Fauth0.com%2Fblog%2Fngrx-facades-pros-and-cons%2F" target="_blank" rel="noopener noreferrer">NgRx Facades: Pros and Cons</a> for a great explanation.</p><h2>Facade Services in Practice</h2><p>But now, let’s get back to our application and apply what we learned about Facades.</p><p>We will be implementing a Facade Service for each of our Store Modules we built in the previous articles. </p><p>The Facade Service will be the interface between the modules that import the Store Modules and their internal smart components.</p><p>The only Feature Module we need to build is going to be the Dashboard Feature Module that will take care of defining the UI containers and components that will be connected via our Facade Services exported from the Store Modules. </p><p>We will build 4 components:</p><ul><li><strong>Dashboard component,</strong> that will query the store for the assets that have been subscribed. Initially, no asset is selected.</li><li><strong>Tile component,</strong> that will  contain an asset selector if no asset for that tile has been subscribed, otherwise, it will display an asset pricer if instead the user subscribed to an asset</li><li><strong>Asset selector,</strong> that the user can use to select an asset (ex. Bitcoin)</li><li><strong>Asset pricer,</strong> that will display the prices of the asset selected</li></ul><p>A few things before we start:</p><ul><li>These components will be powered by <a href="https://medium.com/r/?url=https%3A%2F%2Fmaterial.angular.io%2F" target="_blank" rel="noopener noreferrer">Angular Material</a></li><li>All imports are omitted for brevity, but the link to the source code will be provided</li></ul><h3>Dashboard Component</h3><p>The Dashboard component will be responsible for 2 things:</p><ul><li>loading the assets when initialized, using the <em>Assets Facade</em></li><li>querying and displaying all the tiles from the store, using the <em>Dashboard Facade</em></li></ul><p>Before we build the component, let’s take a look at the Facades. </p><p>We first create the <strong>Dashboard Facade</strong>:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DashboardFacadeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DashboardFacadeService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> tiles$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Tile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>selectAllTiles<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> store<span class="token operator">:</span> Store<span class="token operator">&lt;</span>EntityAdapter<span class="token operator">&lt;</span>Tile<span class="token operator">&gt;&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">addTile</span><span class="token punctuation">(</span>payload<span class="token operator">:</span> Tile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addTile</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">updateTileAsset</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">updateTileAsset</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> assetId <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let’s break it down:</p><ul><li><strong>tiles$</strong> is an Observable that selects all the tiles from the store</li><li>we have two methods, <strong>addTile,</strong> and <strong>updateTileAsset,</strong> that will dispatch actions to the store for adding and updating a tile</li></ul><p>We first create the <strong>Assets Facade</strong>:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AssetsFacadeImplService</span> <span class="token keyword">implements</span> <span class="token class-name">AssetsFacadeService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> assets$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>selectAllAssets<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> store<span class="token operator">:</span> Store<span class="token operator">&lt;</span>EntityState<span class="token operator">&lt;</span>Asset<span class="token operator">&gt;&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">getAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
            <span class="token function">getAssetsRequestStarted</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                payload<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This one is very simple, we have:</p><ul><li>the list of assets selected from the store</li><li>an action dispatched to the effects to fetch the assets using the API</li></ul><p>And now on to the UI side of things. We define the Dashboard Component’s controller, which will use the two Facades we defined above:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;cf-dashboard&#x27;</span><span class="token punctuation">,</span>
    templateUrl<span class="token operator">:</span> <span class="token string">&#x27;./dashboard.component.html&#x27;</span><span class="token punctuation">,</span>
    styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./dashboard.component.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    changeDetection<span class="token operator">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span>OnPush
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DashboardComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> tiles$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dashboardFacade<span class="token punctuation">.</span>tiles$<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token keyword">private</span> dashboardFacade<span class="token operator">:</span> DashboardFacadeService<span class="token punctuation">,</span>
        <span class="token keyword">private</span> assetsFacade<span class="token operator">:</span> AssetsFacadeService
    <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>assetsFacade<span class="token punctuation">.</span><span class="token function">getAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addTile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dashboardFacade<span class="token punctuation">.</span><span class="token function">addTile</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Tile</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>The template of the component will display the tiles using a Grid List component from Angular Material</li><li>Every tile’s state is passed to the component <strong>cf-tile</strong></li><li>A button (<code>mat-icon-button</code>) is displayed in its own tile and is used to add a new empty tile</li></ul><div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-grid-list</span>
    <span class="token attr-name">cols</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">rowHeight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2:1<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">gutterSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tiles$ | async as tiles<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>let tile of tiles<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-grid-tile</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pricer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cf-tile</span> <span class="token attr-name">[tile]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cf-tile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-grid-tile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-grid-tile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">mat-icon-button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addTile()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-icon</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>add<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-grid-tile</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-grid-list</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>Tile Component</h3><p>The tile component is responsible for displaying either the assets dropdown or the asset price if any has been subscribed. This component is going to need two facades:</p><ul><li>the dashboard facade, that we defined earlier</li><li>the prices facade, in order to create a subscription once an asset has been selected</li></ul><p>Let’s move on and define the Pricer Facade:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PricesFacadeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PricesFacadeService</span> <span class="token punctuation">{</span>
    subscribedAssets$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>
        selectSubscribedAssets
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> store<span class="token operator">:</span> Store<span class="token operator">&lt;</span>EntityState<span class="token operator">&lt;</span>PriceState<span class="token operator">&gt;&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">createPriceSubscription</span><span class="token punctuation">(</span>assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addInitialPrice</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createSubscription</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">getPriceForAsset</span><span class="token punctuation">(</span>assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">selectPriceForAsset</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">addInitialPrice</span><span class="token punctuation">(</span>assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addPrice</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>assetId<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">createSubscription</span><span class="token punctuation">(</span>assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createPriceSubscription</span><span class="token punctuation">(</span><span class="token punctuation">{</span> payload<span class="token operator">:</span> assetId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now, let’s break what we’ve defined down:</p><ul><li>we define two private methods for dispatching actions: the method <code>addInitalPrice</code> will create the initial price for the asset subscribed, which is initially empty; the other method <code>createSubscription</code> will start the WebSocket subscription, as we’ve seen <a href="https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d" target="_blank" rel="noopener noreferrer">in the previous article</a> when we defined the effects.</li></ul><p>The Tile component is very simple: </p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;cf-tile&#x27;</span><span class="token punctuation">,</span>
    templateUrl<span class="token operator">:</span> <span class="token string">&#x27;./tile.component.html&#x27;</span><span class="token punctuation">,</span>
    styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./tile.component.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    changeDetection<span class="token operator">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span>OnPush
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">TileComponent</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">Input</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> tile<span class="token operator">:</span> Tile<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token keyword">private</span> dashboardFacade<span class="token operator">:</span> DashboardFacadeService<span class="token punctuation">,</span>
        <span class="token keyword">private</span> pricesFacade<span class="token operator">:</span> PricesFacadeService
    <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">updateTile</span><span class="token punctuation">(</span>assetId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dashboardFacade<span class="token punctuation">.</span><span class="token function">updateTileAsset</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tile<span class="token punctuation">.</span>id<span class="token punctuation">,</span> assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pricesFacade<span class="token punctuation">.</span><span class="token function">createPriceSubscription</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the template, we simply use an <code>ngSwitch</code> to either display the price if the <code>assetId</code> is defined, or the selector if it is undefined.</p><div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[ngSwitch]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile.assetId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxLayout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile-heading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">*ngSwitchDefault</span><span class="token punctuation">&gt;</span></span>
            {{ tile.assetId | titlecase }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cf-asset-selector</span>
            <span class="token attr-name">*ngSwitchCase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>undefined<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">(assetSelected)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTile($event)<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cf-asset-selector</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxFlexAlign</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cf-asset-pricer</span>
           <span class="token attr-name">*ngSwitchDefault</span>
           <span class="token attr-name">[asset]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tile.assetId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cf-asset-pricer</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The component <code>cf-asset-selector</code> will dispatch an output when an asset is selected by the user, and the output will call the method <code>updateTile</code> , which will update the tile by assigning it an <code>assetId</code>, and then will call the method to create the price subscription and start streaming the asset prices.</p><h3>Asset Selector Component</h3><p>The Asset Selector component is simply a dropdown with the available assets that will dispatch an output when an asset has been selected. The assets are queried from the Assets Facade. Simple, right?</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;cf-asset-selector&#x27;</span><span class="token punctuation">,</span>
    templateUrl<span class="token operator">:</span> <span class="token string">&#x27;./asset-selector.component.html&#x27;</span><span class="token punctuation">,</span>
    styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./asset-selector.component.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    changeDetection<span class="token operator">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span>OnPush
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AssetSelectorComponent</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">Output</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> assetSelected <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> assets$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>assetsFacade<span class="token punctuation">.</span>assets$<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> assetsFacade<span class="token operator">:</span> AssetsFacadeService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The template is powered by the <code>mat-select</code> component from Angular Material, although a simple select would have done the job. We simply create a select and iterate the assets to create the available option. </p><p>When an option gets selected, the output <code>assetSelected</code> will emit a new event.</p><div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-form-field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-label</span><span class="token punctuation">&gt;</span></span>
        Select Asset
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-label</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-select</span> <span class="token attr-name">(selectionChange)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>assetSelected.next($event.value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-option</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>let asset of (assets$ | async)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[value]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asset.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ asset.name }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-form-field</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>Asset Pricer Component</h3><p>The Asset Pricer component is responsible for displaying the prices, and also show when a price went up or down for 2 seconds. </p><p>As you may have noticed, this component is the cool one. We receive an asset ID as input, and we create a subscription to the store for streaming the prices to our component.</p><blockquote><p>Technically this is a smart component and should have passed the data down to dumb components, but for brevity, I thought it’d be better to show all the code in one single component</p></blockquote><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;cf-asset-pricer&#x27;</span><span class="token punctuation">,</span>
    templateUrl<span class="token operator">:</span> <span class="token string">&#x27;./asset-pricer.component.html&#x27;</span><span class="token punctuation">,</span>
    styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./asset-pricer.component.scss&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    changeDetection<span class="token operator">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span>OnPush
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AssetPricerComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">Input</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> asset<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> price$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> trend$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Trend<span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">readonly</span> trends <span class="token operator">=</span> Trend<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> pricesFacade<span class="token operator">:</span> PricesFacadeService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pricesFacade<span class="token punctuation">.</span><span class="token function">getPriceForAsset</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>asset<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
            <span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>price<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">shareReplay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> timer$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
            <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">mapTo</span><span class="token punctuation">(</span>Trend<span class="token punctuation">.</span>Stale<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> trend$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
            <span class="token function">pairwise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prices<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> prices<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prices<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prices<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseFloat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>previous<span class="token punctuation">,</span> current<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> current <span class="token operator">&gt;</span> previous <span class="token operator">?</span> Trend<span class="token punctuation">.</span>Up <span class="token operator">:</span> Trend<span class="token punctuation">.</span>Down<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>trend$ <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>trend$<span class="token punctuation">,</span> timer$<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This component is a little bit more complex so we may want to break this down. Our goal is to:</p><ul><li> display a red price when a price goes down</li><li>display a green price when the price goes up</li><li>return the price to a normal state (white) after 2 seconds</li></ul><p>This is what happens:</p><ul><li>we get a price via the facade method <code>getPriceForAsset</code> and we simply map to its formatted version</li><li>we store in memory the latest price received with <code>shareReplay(1)</code> so we can reuse the subscription to calculate the trend</li><li>every time we get a new price, we create a timer that maps the price state to <code>Stale</code> </li><li>we use the operator <code>pairwise</code> that gives us the current and the previous value for the current subscription, and thanks to that we can figure out if the price went up or down</li><li>The trend is an observable emitted when a price changes, and is obtained by merging the timer and the trend result. Every time we have a price change, it first becomes red or green, and then goes back to its normal state after 2 seconds when the observable <code>timer$</code> emits a value</li></ul><div class="remark-highlight"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(price$ | async) as price; else showEmptyState<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">[ngClass]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
            <span class="token punctuation">&#x27;</span>trend-up<span class="token punctuation">&#x27;</span>: (trend$ | async) === trends.Up,
            <span class="token punctuation">&#x27;</span>trend-down<span class="token punctuation">&#x27;</span>: (trend$ | async) === trends.Down
         }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
        ${{ price }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">#showEmptyState</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-spinner</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-spinner</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The template is very simply the price obtained by the store, replaced by a spinner while the price is undefined, meaning the subscription is still ongoing. </p><p>The classes <code>trend-up</code> and <code>trend-down</code> are added to style the price’s color.</p><h2>Final words</h2><p>NGRX is a very powerful tool. Certainly, sometimes it may require some in-depth knowledge of RxJS, but with a little bit of patience, it can really revolutionize the way you’ve been writing software. </p><p>I hope this tutorial has helped you understand how to set up a basic (yet scalable) folder structure and the basics to start writing powerful reactive applications with Angular and NGRX.</p><p>For any clarifications or if there are things you’d do differently, feel free to send me an email or comment below.</p><h3>Source Code</h3><p>The full source code of the project can be seen at <a href="https://medium.com/r/?url=https%3A%2F%2Fgithub.com%2FGbuomprisco%2Fcryptofolio" target="_blank" rel="noopener noreferrer">https://github.com/Gbuomprisco/cryptofolio</a></p><hr/><p>Hope you enjoyed the article and leave a message if you agree, disagree, or if you would do anything differently!</p><hr/><p><em>If you enjoyed this article, follow me on</em> <a href="https://medium.com/@.gc" target="_blank" rel="noopener noreferrer"><em>Medium</em></a> <em>or</em> <a href="https://medium.com/r/?url=https%3A%2F%2Ftwitter.com%2Fhome" target="_blank" rel="noopener noreferrer"><em>Twitter</em></a> <em>for more articles about Angular, RxJS, Typescript and more!</em></p></div></article><div class="max-w-2xl mx-auto"><div class="mx-auto flex flex-col"><h3 class="font-medium text-lg md:text-2xl mb-4"><b class="font-bold">State Management with NgRx<!-- --> (<!-- -->4<!-- --> Part Series)</b></h3><div class="flex flex-col space-y-4"><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/state-management-with-ngrx-introduction"><span>1</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/state-management-with-ngrx-introduction">Introduction</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-05-02T00:00:00.322Z">May	2, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">9 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/architecting-the-store-in-ngrx"><span>2</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/architecting-the-store-in-ngrx">Architecting the Store</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-05-05T00:00:00.322Z">May	5, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">10 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center bg-gray-100 hover:bg-gray-200" href="/angular/building-side-effects-in-ngrx"><span>3</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-medium" href="/angular/building-side-effects-in-ngrx">Building Side Effects</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-06-05T00:00:00.322Z">June	5, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">6 min read</span></div></div></div><div class="flex flex-row items-center space-x-6"><div><div style="background-color:#e23236" class="rounded-full cursor-pointer w-10 h-10 opacity-90 hover:opacity-100 flex items-center justify-center font-bold text-white" href="/angular/abstracting-state-with-ngrx-facades"><span>4</span></div></div><div class="flex flex-col space-y-1"><h3 class="leading-snug text-xl"><a class="hover:underline font-bold" href="/angular/abstracting-state-with-ngrx-facades">Abstracting State with Facades</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2019-06-27T00:00:00.322Z">June	27, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">10 min read</span></div></div></div></div></div></div><div class="w-full md:w-8/12 mx-auto"><script async="" data-uid="3e3126f064" src="https://thoughtful-inventor-7842.ck.page/3e3126f064/index.js"></script></div><div><hr class="border-accent-2 mt-16 mb-14"/><h3 class="text-2xl md:text-3xl text-center font-semibold my-4 md:my-12 flex flex-row space-x-4 items-center justify-center"><span>More Posts for</span> <div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:28px;height:28px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></h3><section><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 md:gap-x-12 lg:gap-x-16 gap-y-20 md:gap-y-24 mb-32"><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Benchmarking Angular 12 with Webpack 5" href="/angular/webpack-5-angular12"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/benchmarking-webpack-5.webp" alt="Cover Image for Benchmarking Angular 12 with Webpack 5" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/webpack-5-angular12">Benchmarking Angular 12 with Webpack 5</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2021-05-14T00:00:00.322Z">May	14, 2021</time></div><span class="text-gray-600">·</span><span class="text-gray-600">2 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Angular 12 has been released and with it the much awaited Webpack 5 upgrade. In this post I benchmarked the bundle-size and compilation speed against the previous version</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Principles for creating libraries with Nx and Angular" href="/angular/how-to-organize-nx-modules-with-angular"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/organize-nx-modules-ngrx.webp" alt="Cover Image for Principles for creating libraries with Nx and Angular" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/how-to-organize-nx-modules-with-angular">Principles for creating libraries with Nx and Angular</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2021-02-07T00:00:00.322Z">February	7, 2021</time></div><span class="text-gray-600">·</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Working with Nx may be confusing. This article explains how I create Nx libraries and the principles behind my motivations</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Where to put your Angular models?" href="/angular/angular-where-to-put-models"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/where-put-angular-models.webp" alt="Cover Image for Where to put your Angular models?" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/angular-where-to-put-models">Where to put your Angular models?</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-08-03T00:00:00.322Z">August	3, 2020</time></div><span class="text-gray-600">·</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Organizing entities and models in your Angular app may be hard. This article explains where to put your entities and what mistakes to watch out for</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Using the Intersection Observer API with Angular" href="/angular/intersection-observer-with-angular"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/intersection-observer.webp" alt="Cover Image for Using the Intersection Observer API with Angular" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/intersection-observer-with-angular">Using the Intersection Observer API with Angular</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-08-01T00:00:00.322Z">August	1, 2020</time></div><span class="text-gray-600">·</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">This article shows how to build a directive with Angular that uses the Intersection Observer API to check when an element becomes visible on the page</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Setters vs ngOnChanges: which one is better?" href="/angular/setters-vs-ng-on-changes"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/setters-vs-on-changes.webp" alt="Cover Image for Setters vs ngOnChanges: which one is better?" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/setters-vs-ng-on-changes">Setters vs ngOnChanges: which one is better?</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-07-30T00:00:00.322Z">July	30, 2020</time></div><span class="text-gray-600">·</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Listening to Input changes can be done in different ways. But which one should you use?</p></div><div><div class="mb-3"><div class="sm:mx-0"><a aria-label="Async Rendering with a single Rx Operator" href="/angular/async-rendering-with-a-single-rx-operator"><img style="width:100%;height:auto" class="shadow-small block hover:shadow-medium transition-shadow duration-200" src="/assets/images/posts/async-rendering.webp" alt="Cover Image for Async Rendering with a single Rx Operator" loading="lazy"/></a></div></div><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/angular/async-rendering-with-a-single-rx-operator">Async Rendering with a single Rx Operator</a></h3><div class="text-xs mb-2 flex flex-row space-x-2 items-center"><div class="text-gray-600"><time dateTime="2020-07-11T00:00:00.322Z">July	11, 2020</time></div><span class="text-gray-600">·</span><span class="text-gray-600">3 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--angular" href="/angular"><img loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/angular.png" alt="angular"/><span class="hover:underline">Angular</span></div></div></div><p class="leading-relaxed mb-4 text-sm">Increase your app rendering performance with this simple Rx operator</p></div></div></section></div></div></main></div><footer><div class="container mx-auto px-5"><hr class="border-accent-2 mt-16 mb-14"/><div class="flex-row flex justify-between items-center my-8 md:my-12"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-8 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><h2 class="font-normal tracking-tight md:tracking-tighter leading-tight"><a class="hover:underline" href="/"><b>GIANCARLO</b>BUOMPRISCO</a></h2><div class="flex justify-end"><span class="rounded bg-gray-50 shadow-lg p-4">Close</span></div></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/blog">Blog</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/articles">Articles</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/about">About</a></li><li class="active:text-black text-lg lg:text-base text-gray-800 hover:text-gray-900 font-medium hover:underline"><a class="block" href="/contact">Contact me</a></li></ul></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"readingTime":"10 min read","live":true,"title":"Abstracting State with Facades","date":"2019-06-27T00:00:00.322Z","slug":"abstracting-state-with-ngrx-facades","coverImage":"/assets/images/posts/state-management-with-ngrx.png","collection":"angular","excerpt":"Using Ngrx facades to connect your components with your state","series":"State Management with NgRx","content":"\nThis is the fourth and last article of a series that aims to explain in detail a step-by-step approach to building an Angular application with NGRX.\n\n*   In [the first article of this series](https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fstate-management-with-ngrx-introduction-1aae0803e988), I wrote a small overview of all the concepts surrounding the NGRX platform.\n*   In [the second article of this series](https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Farchitecting-the-store-in-ngrx-e4955641d746), I started writing the store of the application and the state’s entities.\n*   In [the third article of this series](https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d), we built the effects that are responsible for fetching assets and prices from Coincap’s API\n\n### Summary\n\nJust to summarise what I introduced in the previous articles, we have an application that aims to display a dashboard with cryptocurrencies prices.\n\nThe application’s logic is built using three service modules, each module manages a different feature of our store.\n\nThese are:\n\n*   **dashboard**, that manages the logic of the dashboard and its tiles\n*   **assets,** a list of assets fetched from [Coincap’s](https://medium.com/r/?url=https%3A%2F%2Fcoincap.io) API\n*   **prices,** a stream of prices from Coincap’s WebSocket API\n\n**What the app will look like:**\n\n![](https://cdn-images-1.medium.com/max/1600/1*R3-0VFvXB2rq-rAtWyNwxA.gif)\n\nType caption for image (optional)\n\n### In this article we will be learning:\n\n*   what a Facade service is and how we apply it to NGRX\n*   creating lean UI components that are connected with the _Store_ using **Facades**\n\n## What’s a Facade?\n\nA _Facade_, in terms of software engineering, is implemented as an object that offers a unified and simpler interface behind a more complex system. \n\nIn other terms, it abstracts the complex system (_NGRX_) behind a single _Service_.\n\nHow is that useful for us?\n\n*   we abstract UI components from the State Management used\n*   we simplify the interfaces using clear, small methods\n*   we minimize the number of dependencies used by a component\n*   we provide a central service to fetch data and dispatch commands\n\n### Advantages\n\n*   **Abstraction**\n    Let’s say we start this project using _NGRX_ and one day we decide to switch to _NGXS_, _Akita_, or some other State Management tooling. By using facades, we never have to refactor components and services that rely on the library used.\n*   **Simplicity**\n    A facade will hide away the technicalities and implementation of the library we use from the consumers, which result in components being lean and simple.\n*   **Reusability**\n    A facade will help with reusing some of the code used to dispatch and create actions, or select fragments from the store, as you never need to write that twice.\n\nOf course, there are also some disadvantages to using Facade Services with NGRX, and I’d recommend you to the article [NgRx Facades: Pros and Cons](https://medium.com/r/?url=https%3A%2F%2Fauth0.com%2Fblog%2Fngrx-facades-pros-and-cons%2F) for a great explanation.\n\n## Facade Services in Practice\n\nBut now, let’s get back to our application and apply what we learned about Facades.\n\nWe will be implementing a Facade Service for each of our Store Modules we built in the previous articles. \n\nThe Facade Service will be the interface between the modules that import the Store Modules and their internal smart components.\n\nThe only Feature Module we need to build is going to be the Dashboard Feature Module that will take care of defining the UI containers and components that will be connected via our Facade Services exported from the Store Modules. \n\nWe will build 4 components:\n\n*   **Dashboard component,** that will query the store for the assets that have been subscribed. Initially, no asset is selected.\n*   **Tile component,** that will  contain an asset selector if no asset for that tile has been subscribed, otherwise, it will display an asset pricer if instead the user subscribed to an asset\n*   **Asset selector,** that the user can use to select an asset (ex. Bitcoin)\n*   **Asset pricer,** that will display the prices of the asset selected\n\nA few things before we start:\n\n*   These components will be powered by [Angular Material](https://medium.com/r/?url=https%3A%2F%2Fmaterial.angular.io%2F)\n*   All imports are omitted for brevity, but the link to the source code will be provided\n\n### Dashboard Component\n\nThe Dashboard component will be responsible for 2 things:\n\n*   loading the assets when initialized, using the _Assets Facade_\n*   querying and displaying all the tiles from the store, using the _Dashboard Facade_\n\nBefore we build the component, let’s take a look at the Facades. \n\nWe first create the **Dashboard Facade**:\n\n```typescript\n@Injectable()\nexport class DashboardFacadeServiceImpl implements DashboardFacadeService {\n    public tiles$: Observable\u003cTile[]\u003e = this.store.select(selectAllTiles);\n\n    constructor(private store: Store\u003cEntityAdapter\u003cTile\u003e\u003e) {}\n\n    addTile(payload: Tile) {\n        this.store.dispatch(addTile({ payload }));\n    }\n\n    updateTileAsset(id: string, assetId: string) {\n        this.store.dispatch(updateTileAsset({ payload: { id, assetId } }));\n    }\n}\n```\n\nLet’s break it down:\n\n*   **tiles$** is an Observable that selects all the tiles from the store\n*   we have two methods, **addTile,** and **updateTileAsset,** that will dispatch actions to the store for adding and updating a tile\n\nWe first create the **Assets Facade**:\n\n```typescript\n@Injectable()\nexport class AssetsFacadeImplService implements AssetsFacadeService {\n    public assets$ = this.store.select(selectAllAssets);\n\n    constructor(private store: Store\u003cEntityState\u003cAsset\u003e\u003e) {}\n\n    getAssets() {\n        this.store.dispatch(\n            getAssetsRequestStarted({\n                payload: []\n            })\n        );\n    }\n}\n```\n\nThis one is very simple, we have:\n\n*   the list of assets selected from the store\n*   an action dispatched to the effects to fetch the assets using the API\n\nAnd now on to the UI side of things. We define the Dashboard Component’s controller, which will use the two Facades we defined above:\n\n```typescript\n@Component({\n    selector: 'cf-dashboard',\n    templateUrl: './dashboard.component.html',\n    styleUrls: ['./dashboard.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DashboardComponent implements OnInit {\n    public tiles$ = this.dashboardFacade.tiles$;\n\n    constructor(\n        private dashboardFacade: DashboardFacadeService,\n        private assetsFacade: AssetsFacadeService\n    ) {}\n\n    ngOnInit() {\n        this.assetsFacade.getAssets();\n    }\n\n    addTile() {\n        this.dashboardFacade.addTile(new Tile(undefined));\n    }\n}\n```\n\n*   The template of the component will display the tiles using a Grid List component from Angular Material\n*   Every tile’s state is passed to the component **cf-tile**\n*   A button (`mat-icon-button`) is displayed in its own tile and is used to add a new empty tile\n\n```html\n\u003cmat-grid-list\n    cols=\"4\"\n    rowHeight=\"2:1\"\n    gutterSize=\"15px\"\n    *ngIf=\"tiles$ | async as tiles\"\n\u003e\n    \u003cng-container *ngFor=\"let tile of tiles\"\u003e\n        \u003cmat-grid-tile class=\"pricer\"\u003e\n            \u003ccf-tile [tile]=\"tile\"\u003e\u003c/cf-tile\u003e\n        \u003c/mat-grid-tile\u003e\n    \u003c/ng-container\u003e\n\n    \u003cmat-grid-tile\u003e\n        \u003cbutton mat-icon-button (click)=\"addTile()\"\u003e\n            \u003cmat-icon color=\"accent\"\u003eadd\u003c/mat-icon\u003e\n        \u003c/button\u003e\n    \u003c/mat-grid-tile\u003e\n\u003c/mat-grid-list\u003e\n```\n\n### Tile Component\n\nThe tile component is responsible for displaying either the assets dropdown or the asset price if any has been subscribed. This component is going to need two facades:\n\n*   the dashboard facade, that we defined earlier\n*   the prices facade, in order to create a subscription once an asset has been selected\n\nLet’s move on and define the Pricer Facade:\n\n```typescript\n@Injectable()\nexport class PricesFacadeServiceImpl implements PricesFacadeService {\n    subscribedAssets$: Observable\u003cstring[]\u003e = this.store.select(\n        selectSubscribedAssets\n    );\n\n    constructor(private store: Store\u003cEntityState\u003cPriceState\u003e\u003e) {}\n\n    public createPriceSubscription(assetId: string) {\n        this.addInitialPrice(assetId);\n        this.createSubscription(assetId);\n    }\n\n    public getPriceForAsset(assetId: string): Observable\u003cstring\u003e {\n        return this.store.select(selectPriceForAsset(assetId));\n    }\n\n    private addInitialPrice(assetId: string) {\n        this.store.dispatch(addPrice({ payload: { [assetId]: '' } }));\n    }\n\n    private createSubscription(assetId: string) {\n        this.store.dispatch(createPriceSubscription({ payload: assetId }));\n    }\n}\n```\n\nNow, let’s break what we’ve defined down:\n\n*   we define two private methods for dispatching actions: the method `addInitalPrice` will create the initial price for the asset subscribed, which is initially empty; the other method `createSubscription` will start the WebSocket subscription, as we’ve seen [in the previous article](https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d) when we defined the effects.\n\nThe Tile component is very simple: \n\n```typescript\n@Component({\n    selector: 'cf-tile',\n    templateUrl: './tile.component.html',\n    styleUrls: ['./tile.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TileComponent {\n    @Input() tile: Tile;\n\n    constructor(\n        private dashboardFacade: DashboardFacadeService,\n        private pricesFacade: PricesFacadeService\n    ) {}\n\n    updateTile(assetId: string) {\n        this.dashboardFacade.updateTileAsset(this.tile.id, assetId);\n        this.pricesFacade.createPriceSubscription(assetId);\n    }\n}\n```\n\nIn the template, we simply use an `ngSwitch` to either display the price if the `assetId` is defined, or the selector if it is undefined.\n\n```html\n\u003cdiv [ngSwitch]=\"tile.assetId\" fxLayout=\"column\"\u003e\n    \u003cdiv class=\"tile-header\"\u003e\n        \u003cdiv class=\"tile-heading\" *ngSwitchDefault\u003e\n            {{ tile.assetId | titlecase }}\n        \u003c/div\u003e\n\n        \u003ccf-asset-selector\n            *ngSwitchCase=\"undefined\"\n            (assetSelected)=\"updateTile($event)\"\n        \u003e\u003c/cf-asset-selector\u003e\n    \u003c/div\u003e\n\n   \u003cdiv class=\"tile-content\" fxFlexAlign=\"center center\"\u003e\n       \u003ccf-asset-pricer\n           *ngSwitchDefault\n           [asset]=\"tile.assetId\"\u003e\n       \u003c/cf-asset-pricer\u003e\n   \u003c/div\u003e\n\u003c/div\u003e\n```\n\nThe component `cf-asset-selector` will dispatch an output when an asset is selected by the user, and the output will call the method `updateTile` , which will update the tile by assigning it an `assetId`, and then will call the method to create the price subscription and start streaming the asset prices.\n\n### Asset Selector Component\n\nThe Asset Selector component is simply a dropdown with the available assets that will dispatch an output when an asset has been selected. The assets are queried from the Assets Facade. Simple, right?\n\n```typescript\n@Component({\n    selector: 'cf-asset-selector',\n    templateUrl: './asset-selector.component.html',\n    styleUrls: ['./asset-selector.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AssetSelectorComponent {\n    @Output() assetSelected = new EventEmitter\u003cstring\u003e();\n\n    public assets$ = this.assetsFacade.assets$;\n\n    constructor(private assetsFacade: AssetsFacadeService) {}\n}\n```\n\nThe template is powered by the `mat-select` component from Angular Material, although a simple select would have done the job. We simply create a select and iterate the assets to create the available option. \n\nWhen an option gets selected, the output `assetSelected` will emit a new event.\n\n```html\n\u003cmat-form-field\u003e\n    \u003cmat-label\u003e\n        Select Asset\n    \u003c/mat-label\u003e\n\n    \u003cmat-select (selectionChange)=\"assetSelected.next($event.value)\"\u003e\n        \u003cmat-option *ngFor=\"let asset of (assets$ | async)\" [value]=\"asset.id\"\u003e\n            {{ asset.name }}\n        \u003c/mat-option\u003e\n    \u003c/mat-select\u003e\n\u003c/mat-form-field\u003e\n```\n\n### Asset Pricer Component\n\nThe Asset Pricer component is responsible for displaying the prices, and also show when a price went up or down for 2 seconds. \n\nAs you may have noticed, this component is the cool one. We receive an asset ID as input, and we create a subscription to the store for streaming the prices to our component.\n\n\u003e Technically this is a smart component and should have passed the data down to dumb components, but for brevity, I thought it’d be better to show all the code in one single component\n\n```typescript\n@Component({\n    selector: 'cf-asset-pricer',\n    templateUrl: './asset-pricer.component.html',\n    styleUrls: ['./asset-pricer.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AssetPricerComponent implements OnInit {\n    @Input()\n    public asset: string;\n\n    public price$: Observable\u003cstring\u003e;\n    public trend$: Observable\u003cTrend\u003e;\n\n    public readonly trends = Trend;\n\n    constructor(private pricesFacade: PricesFacadeService) {}\n\n    ngOnInit() {\n        this.price$ = this.pricesFacade.getPriceForAsset(this.asset).pipe(\n            filter(Boolean),\n            map((price: string) =\u003e {\n                return parseFloat(price).toFixed(2);\n            }),\n            shareReplay(1)\n        );\n\n        const timer$ = this.price$.pipe(\n            switchMap(() =\u003e timer(2000)),\n            mapTo(Trend.Stale)\n        );\n\n        const trend$ = this.price$.pipe(\n            pairwise(),\n            filter((prices: string[]) =\u003e prices[0] !== prices[1]),\n            map((prices: string[]) =\u003e prices.map(parseFloat)),\n            map(([previous, current]: number[]) =\u003e {\n                return current \u003e previous ? Trend.Up : Trend.Down;\n            })\n        );\n\n        this.trend$ = merge(trend$, timer$);\n    }\n}\n```\n\nThis component is a little bit more complex so we may want to break this down. Our goal is to:\n\n*    display a red price when a price goes down\n*   display a green price when the price goes up\n*   return the price to a normal state (white) after 2 seconds\n\nThis is what happens:\n\n*   we get a price via the facade method `getPriceForAsset` and we simply map to its formatted version\n*   we store in memory the latest price received with `shareReplay(1)` so we can reuse the subscription to calculate the trend\n*   every time we get a new price, we create a timer that maps the price state to `Stale` \n*   we use the operator `pairwise` that gives us the current and the previous value for the current subscription, and thanks to that we can figure out if the price went up or down\n*   The trend is an observable emitted when a price changes, and is obtained by merging the timer and the trend result. Every time we have a price change, it first becomes red or green, and then goes back to its normal state after 2 seconds when the observable `timer$` emits a value\n\n```html\n\u003cdiv class=\"price-container\"\u003e\n    \u003cdiv class=\"price\"\n         *ngIf=\"(price$ | async) as price; else showEmptyState\"\n         [ngClass]=\"{\n            'trend-up': (trend$ | async) === trends.Up,\n            'trend-down': (trend$ | async) === trends.Down\n         }\"\n    \u003e\n        ${{ price }}\n    \u003c/div\u003e\n\n    \u003cng-template #showEmptyState\u003e\n        \u003cmat-spinner\u003e\u003c/mat-spinner\u003e\n    \u003c/ng-template\u003e\n\u003c/div\u003e\n```\n\nThe template is very simply the price obtained by the store, replaced by a spinner while the price is undefined, meaning the subscription is still ongoing. \n\nThe classes `trend-up` and `trend-down` are added to style the price’s color.\n\n## Final words\n\nNGRX is a very powerful tool. Certainly, sometimes it may require some in-depth knowledge of RxJS, but with a little bit of patience, it can really revolutionize the way you’ve been writing software. \n\nI hope this tutorial has helped you understand how to set up a basic (yet scalable) folder structure and the basics to start writing powerful reactive applications with Angular and NGRX.\n\nFor any clarifications or if there are things you’d do differently, feel free to send me an email or comment below.\n\n### Source Code\n\nThe full source code of the project can be seen at [https://github.com/Gbuomprisco/cryptofolio](https://medium.com/r/?url=https%3A%2F%2Fgithub.com%2FGbuomprisco%2Fcryptofolio)\n\n* * *\n\nHope you enjoyed the article and leave a message if you agree, disagree, or if you would do anything differently!\n\n* * *\n\n_If you enjoyed this article, follow me on_ [_Medium_](https://medium.com/@.gc) _or_ [_Twitter_](https://medium.com/r/?url=https%3A%2F%2Ftwitter.com%2Fhome) _for more articles about Angular, RxJS, Typescript and more!_\n"},"content":{"compiledSource":"var l=Object.defineProperty,i=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var m=(e,n,s)=\u003en in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(e,n)=\u003e{for(var s in n||(n={}))o.call(n,s)\u0026\u0026m(e,s,n[s]);if(p)for(var s of p(n))c.call(n,s)\u0026\u0026m(e,s,n[s]);return e},r=(e,n)=\u003ei(e,u(n));var N=(e,n)=\u003e{var s={};for(var t in e)o.call(e,t)\u0026\u0026n.indexOf(t)\u003c0\u0026\u0026(s[t]=e[t]);if(e!=null\u0026\u0026p)for(var t of p(e))n.indexOf(t)\u003c0\u0026\u0026c.call(e,t)\u0026\u0026(s[t]=e[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:e}=t,n=N(t,[\"components\"]);return mdx(MDXLayout,r(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"This is the fourth and last article of a series that aims to explain in detail a step-by-step approach to building an Angular application with NGRX.\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"In \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fstate-management-with-ngrx-introduction-1aae0803e988\"}),\"the first article of this series\"),\", I wrote a small overview of all the concepts surrounding the NGRX platform.\"),mdx(\"li\",{parentName:\"ul\"},\"In \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Farchitecting-the-store-in-ngrx-e4955641d746\"}),\"the second article of this series\"),\", I started writing the store of the application and the state\\u2019s entities.\"),mdx(\"li\",{parentName:\"ul\"},\"In \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d\"}),\"the third article of this series\"),\", we built the effects that are responsible for fetching assets and prices from Coincap\\u2019s API\")),mdx(\"h3\",null,\"Summary\"),mdx(\"p\",null,\"Just to summarise what I introduced in the previous articles, we have an application that aims to display a dashboard with cryptocurrencies prices.\"),mdx(\"p\",null,\"The application\\u2019s logic is built using three service modules, each module manages a different feature of our store.\"),mdx(\"p\",null,\"These are:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"dashboard\"),\", that manages the logic of the dashboard and its tiles\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"assets,\"),\" a list of assets fetched from \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fcoincap.io\"}),\"Coincap\\u2019s\"),\" API\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"prices,\"),\" a stream of prices from Coincap\\u2019s WebSocket API\")),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"What the app will look like:\")),mdx(\"p\",null,mdx(\"img\",a({parentName:\"p\"},{src:\"https://cdn-images-1.medium.com/max/1600/1*R3-0VFvXB2rq-rAtWyNwxA.gif\",alt:null}))),mdx(\"p\",null,\"Type caption for image (optional)\"),mdx(\"h3\",null,\"In this article we will be learning:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"what a Facade service is and how we apply it to NGRX\"),mdx(\"li\",{parentName:\"ul\"},\"creating lean UI components that are connected with the \",mdx(\"em\",{parentName:\"li\"},\"Store\"),\" using \",mdx(\"strong\",{parentName:\"li\"},\"Facades\"))),mdx(\"h2\",null,\"What\\u2019s a\\xA0Facade?\"),mdx(\"p\",null,\"A \",mdx(\"em\",{parentName:\"p\"},\"Facade\"),\", in terms of software engineering, is implemented as an object that offers a unified and simpler interface behind a more complex system.\\xA0\"),mdx(\"p\",null,\"In other terms, it abstracts the complex system (\",mdx(\"em\",{parentName:\"p\"},\"NGRX\"),\") behind a single \",mdx(\"em\",{parentName:\"p\"},\"Service\"),\".\"),mdx(\"p\",null,\"How is that useful for us?\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"we abstract UI components from the State Management used\"),mdx(\"li\",{parentName:\"ul\"},\"we simplify the interfaces using clear, small methods\"),mdx(\"li\",{parentName:\"ul\"},\"we minimize the number of dependencies used by a component\"),mdx(\"li\",{parentName:\"ul\"},\"we provide a central service to fetch data and dispatch commands\")),mdx(\"h3\",null,\"Advantages\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Abstraction\"),`\nLet\\u2019s say we start this project using `,mdx(\"em\",{parentName:\"li\"},\"NGRX\"),\" and one day we decide to switch to \",mdx(\"em\",{parentName:\"li\"},\"NGXS\"),\", \",mdx(\"em\",{parentName:\"li\"},\"Akita\"),\", or some other State Management tooling. By using facades, we never have to refactor components and services that rely on the library used.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Simplicity\"),`\nA facade will hide away the technicalities and implementation of the library we use from the consumers, which result in components being lean and simple.`),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Reusability\"),`\nA facade will help with reusing some of the code used to dispatch and create actions, or select fragments from the store, as you never need to write that twice.`)),mdx(\"p\",null,\"Of course, there are also some disadvantages to using Facade Services with NGRX, and I\\u2019d recommend you to the article \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fauth0.com%2Fblog%2Fngrx-facades-pros-and-cons%2F\"}),\"NgRx Facades: Pros and Cons\"),\" for a great explanation.\"),mdx(\"h2\",null,\"Facade Services in\\xA0Practice\"),mdx(\"p\",null,\"But now, let\\u2019s get back to our application and apply what we learned about Facades.\"),mdx(\"p\",null,\"We will be implementing a Facade Service for each of our Store Modules we built in the previous articles.\\xA0\"),mdx(\"p\",null,\"The Facade Service will be the interface between the modules that import the Store Modules and their internal smart components.\"),mdx(\"p\",null,\"The only Feature Module we need to build is going to be the Dashboard Feature Module that will take care of defining the UI containers and components that will be connected via our Facade Services exported from the Store Modules.\\xA0\"),mdx(\"p\",null,\"We will build 4 components:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Dashboard component,\"),\" that will query the store for the assets that have been subscribed. Initially, no asset is selected.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Tile component,\"),\" that will  contain an asset selector if no asset for that tile has been subscribed, otherwise, it will display an asset pricer if instead the user subscribed to an asset\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Asset selector,\"),\" that the user can use to select an asset (ex. Bitcoin)\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Asset pricer,\"),\" that will display the prices of the asset selected\")),mdx(\"p\",null,\"A few things before we start:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"These components will be powered by \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fmaterial.angular.io%2F\"}),\"Angular Material\")),mdx(\"li\",{parentName:\"ul\"},\"All imports are omitted for brevity, but the link to the source code will be provided\")),mdx(\"h3\",null,\"Dashboard Component\"),mdx(\"p\",null,\"The Dashboard component will be responsible for 2 things:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"loading the assets when initialized, using the \",mdx(\"em\",{parentName:\"li\"},\"Assets Facade\")),mdx(\"li\",{parentName:\"ul\"},\"querying and displaying all the tiles from the store, using the \",mdx(\"em\",{parentName:\"li\"},\"Dashboard Facade\"))),mdx(\"p\",null,\"Before we build the component, let\\u2019s take a look at the Facades.\\xA0\"),mdx(\"p\",null,\"We first create the \",mdx(\"strong\",{parentName:\"p\"},\"Dashboard Facade\"),\":\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Injectable\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"DashboardFacadeServiceImpl\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"implements\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"DashboardFacadeService\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" tiles$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Observable\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"Tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"select\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectAllTiles\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"EntityAdapter\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"Tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addTile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"payload\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"dispatch\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addTile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" payload \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"updateTileAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"id\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"dispatch\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"updateTileAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" payload\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" id\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" assetId \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"Let\\u2019s break it down:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"tiles$\"),\" is an Observable that selects all the tiles from the store\"),mdx(\"li\",{parentName:\"ul\"},\"we have two methods, \",mdx(\"strong\",{parentName:\"li\"},\"addTile,\"),\" and \",mdx(\"strong\",{parentName:\"li\"},\"updateTileAsset,\"),\" that will dispatch actions to the store for adding and updating a tile\")),mdx(\"p\",null,\"We first create the \",mdx(\"strong\",{parentName:\"p\"},\"Assets Facade\"),\":\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Injectable\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"AssetsFacadeImplService\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"implements\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"AssetsFacadeService\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" assets$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"select\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectAllAssets\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"EntityState\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"Asset\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getAssets\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"dispatch\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getAssetsRequestStarted\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n                payload`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"This one is very simple, we have:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"the list of assets selected from the store\"),mdx(\"li\",{parentName:\"ul\"},\"an action dispatched to the effects to fetch the assets using the API\")),mdx(\"p\",null,\"And now on to the UI side of things. We define the Dashboard Component\\u2019s controller, which will use the two Facades we defined above:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Component\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    selector`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'cf-dashboard'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    templateUrl`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./dashboard.component.html'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    styleUrls`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./dashboard.component.scss'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    changeDetection`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" ChangeDetectionStrategy\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),`OnPush\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"DashboardComponent\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"implements\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"OnInit\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" tiles$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"dashboardFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"tiles$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" dashboardFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" DashboardFacadeService\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" assetsFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),` AssetsFacadeService\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"ngOnInit\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"assetsFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getAssets\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addTile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"dashboardFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addTile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"new\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"Tile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"undefined\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"The template of the component will display the tiles using a Grid List component from Angular Material\"),mdx(\"li\",{parentName:\"ul\"},\"Every tile\\u2019s state is passed to the component \",mdx(\"strong\",{parentName:\"li\"},\"cf-tile\")),mdx(\"li\",{parentName:\"ul\"},\"A button (\",mdx(\"inlineCode\",{parentName:\"li\"},\"mat-icon-button\"),\") is displayed in its own tile and is used to add a new empty tile\")),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-html\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-html\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-grid-list\"),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"cols\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"4\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"rowHeight\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"2:1\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"gutterSize\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"15px\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngIf\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tiles$ | async as tiles\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n`,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"ng-container\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngFor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"let tile of tiles\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-grid-tile\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"pricer\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"cf-tile\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"[tile]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"cf-tile\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-grid-tile\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"ng-container\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-grid-tile\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"button\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"mat-icon-button\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"(click)\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"addTile()\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-icon\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"color\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"accent\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),\"add\",mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-icon\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"button\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-grid-tile\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-grid-list\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`))),mdx(\"h3\",null,\"Tile Component\"),mdx(\"p\",null,\"The tile component is responsible for displaying either the assets dropdown or the asset price if any has been subscribed. This component is going to need two facades:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"the dashboard facade, that we defined earlier\"),mdx(\"li\",{parentName:\"ul\"},\"the prices facade, in order to create a subscription once an asset has been selected\")),mdx(\"p\",null,\"Let\\u2019s move on and define the Pricer Facade:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Injectable\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"PricesFacadeServiceImpl\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"implements\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"PricesFacadeService\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    subscribedAssets$`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Observable\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"select\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n        selectSubscribedAssets\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"EntityState\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"PriceState\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"createPriceSubscription\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addInitialPrice\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"createSubscription\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getPriceForAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Observable\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"select\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"selectPriceForAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addInitialPrice\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"dispatch\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"addPrice\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" payload\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"''\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"createSubscription\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"store\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"dispatch\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"createPriceSubscription\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" payload\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" assetId \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"Now, let\\u2019s break what we\\u2019ve defined down:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"we define two private methods for dispatching actions: the method \",mdx(\"inlineCode\",{parentName:\"li\"},\"addInitalPrice\"),\" will create the initial price for the asset subscribed, which is initially empty; the other method \",mdx(\"inlineCode\",{parentName:\"li\"},\"createSubscription\"),\" will start the WebSocket subscription, as we\\u2019ve seen \",mdx(\"a\",a({parentName:\"li\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fitnext.io%2Fbuilding-side-effects-in-ngrx-deb0d856096d\"}),\"in the previous article\"),\" when we defined the effects.\")),mdx(\"p\",null,\"The Tile component is very simple:\\xA0\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Component\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    selector`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'cf-tile'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    templateUrl`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./tile.component.html'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    styleUrls`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./tile.component.scss'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    changeDetection`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" ChangeDetectionStrategy\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),`OnPush\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"TileComponent\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Input\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" dashboardFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" DashboardFacadeService\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" pricesFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),` PricesFacadeService\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"updateTile\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"dashboardFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"updateTileAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"tile\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"id\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"pricesFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"createPriceSubscription\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"assetId\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"In the template, we simply use an \",mdx(\"inlineCode\",{parentName:\"p\"},\"ngSwitch\"),\" to either display the price if the \",mdx(\"inlineCode\",{parentName:\"p\"},\"assetId\"),\" is defined, or the selector if it is undefined.\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-html\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-html\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"[ngSwitch]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile.assetId\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"fxLayout\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"column\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile-header\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile-heading\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngSwitchDefault\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n            {{ tile.assetId | titlecase }}\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"cf-asset-selector\"),`\n            `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngSwitchCase\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"undefined\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n            `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"(assetSelected)\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"updateTile($event)\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n        `,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"cf-asset-selector\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n\n   `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile-content\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"fxFlexAlign\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"center center\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n       `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"cf-asset-pricer\"),`\n           `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngSwitchDefault\"),`\n           `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"[asset]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"tile.assetId\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n       `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"cf-asset-pricer\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n   `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`))),mdx(\"p\",null,\"The component \",mdx(\"inlineCode\",{parentName:\"p\"},\"cf-asset-selector\"),\" will dispatch an output when an asset is selected by the user, and the output will call the method \",mdx(\"inlineCode\",{parentName:\"p\"},\"updateTile\"),\"\\xA0, which will update the tile by assigning it an \",mdx(\"inlineCode\",{parentName:\"p\"},\"assetId\"),\", and then will call the method to create the price subscription and start streaming the asset prices.\"),mdx(\"h3\",null,\"Asset Selector Component\"),mdx(\"p\",null,\"The Asset Selector component is simply a dropdown with the available assets that will dispatch an output when an asset has been selected. The assets are queried from the Assets Facade. Simple, right?\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Component\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    selector`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'cf-asset-selector'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    templateUrl`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./asset-selector.component.html'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    styleUrls`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./asset-selector.component.scss'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    changeDetection`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" ChangeDetectionStrategy\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),`OnPush\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"AssetSelectorComponent\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Output\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" assetSelected \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"new\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"EventEmitter\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" assets$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"assetsFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"assets$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" assetsFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" AssetsFacadeService\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"The template is powered by the \",mdx(\"inlineCode\",{parentName:\"p\"},\"mat-select\"),\" component from Angular Material, although a simple select would have done the job. We simply create a select and iterate the assets to create the available option.\\xA0\"),mdx(\"p\",null,\"When an option gets selected, the output \",mdx(\"inlineCode\",{parentName:\"p\"},\"assetSelected\"),\" will emit a new event.\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-html\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-html\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-form-field\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-label\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        Select Asset\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-label\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-select\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"(selectionChange)\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"assetSelected.next($event.value)\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-option\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngFor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"let asset of (assets$ | async)\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"[value]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"asset.id\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n            {{ asset.name }}\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-option\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-select\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-form-field\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`))),mdx(\"h3\",null,\"Asset Pricer Component\"),mdx(\"p\",null,\"The Asset Pricer component is responsible for displaying the prices, and also show when a price went up or down for 2 seconds.\\xA0\"),mdx(\"p\",null,\"As you may have noticed, this component is the cool one. We receive an asset ID as input, and we create a subscription to the store for streaming the prices to our component.\"),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"Technically this is a smart component and should have passed the data down to dumb components, but for brevity, I thought it\\u2019d be better to show all the code in one single component\")),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Component\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    selector`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'cf-asset-pricer'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    templateUrl`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./asset-pricer.component.html'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    styleUrls`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'./asset-pricer.component.scss'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n    changeDetection`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" ChangeDetectionStrategy\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),`OnPush\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"AssetPricerComponent\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"implements\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"OnInit\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token at operator\"}),\"@\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"Input\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" asset\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" price$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Observable\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" trend$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Observable\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),\"Trend\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"public\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"readonly\"),\" trends \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" Trend\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" pricesFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" PricesFacadeService\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"ngOnInit\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"price$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"pricesFacade\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getPriceForAsset\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"asset\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"Boolean\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"price\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n                `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"parseFloat\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"price\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"toFixed\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"2\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"shareReplay\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" timer$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"price$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"switchMap\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"timer\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"2000\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"mapTo\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"Trend\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"Stale\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" trend$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"price$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"pairwise\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"prices\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" prices\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"!==\"),\" prices\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"prices\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" prices\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"parseFloat\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"previous\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" current\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"number\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n                `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" current \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" previous \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"?\"),\" Trend\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"Up \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" Trend\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"Down\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n            `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"trend$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"merge\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"trend$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" timer$\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"This component is a little bit more complex so we may want to break this down. Our goal is to:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"\\xA0display a red price when a price goes down\"),mdx(\"li\",{parentName:\"ul\"},\"display a green price when the price goes up\"),mdx(\"li\",{parentName:\"ul\"},\"return the price to a normal state (white) after 2 seconds\")),mdx(\"p\",null,\"This is what happens:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"we get a price via the facade method \",mdx(\"inlineCode\",{parentName:\"li\"},\"getPriceForAsset\"),\" and we simply map to its formatted version\"),mdx(\"li\",{parentName:\"ul\"},\"we store in memory the latest price received with \",mdx(\"inlineCode\",{parentName:\"li\"},\"shareReplay(1)\"),\" so we can reuse the subscription to calculate the trend\"),mdx(\"li\",{parentName:\"ul\"},\"every time we get a new price, we create a timer that maps the price state to \",mdx(\"inlineCode\",{parentName:\"li\"},\"Stale\"),\"\\xA0\"),mdx(\"li\",{parentName:\"ul\"},\"we use the operator \",mdx(\"inlineCode\",{parentName:\"li\"},\"pairwise\"),\" that gives us the current and the previous value for the current subscription, and thanks to that we can figure out if the price went up or down\"),mdx(\"li\",{parentName:\"ul\"},\"The trend is an observable emitted when a price changes, and is obtained by merging the timer and the trend result. Every time we have a price change, it first becomes red or green, and then goes back to its normal state after 2 seconds when the observable \",mdx(\"inlineCode\",{parentName:\"li\"},\"timer$\"),\" emits a value\")),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-html\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-html\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"price-container\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"class\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"price\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n         `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"*ngIf\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"(price$ | async) as price; else showEmptyState\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n         `,mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"[ngClass]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),`{\n            `,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"'\"),\"trend-up\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"'\"),`: (trend$ | async) === trends.Up,\n            `,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"'\"),\"trend-down\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"'\"),`: (trend$ | async) === trends.Down\n         }`,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        \\${{ price }}\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"ng-template\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"#showEmptyState\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n        `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"mat-spinner\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"mat-spinner\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"ng-template\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n`))),mdx(\"p\",null,\"The template is very simply the price obtained by the store, replaced by a spinner while the price is undefined, meaning the subscription is still ongoing.\\xA0\"),mdx(\"p\",null,\"The classes \",mdx(\"inlineCode\",{parentName:\"p\"},\"trend-up\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"trend-down\"),\" are added to style the price\\u2019s color.\"),mdx(\"h2\",null,\"Final words\"),mdx(\"p\",null,\"NGRX is a very powerful tool. Certainly, sometimes it may require some in-depth knowledge of RxJS, but with a little bit of patience, it can really revolutionize the way you\\u2019ve been writing software.\\xA0\"),mdx(\"p\",null,\"I hope this tutorial has helped you understand how to set up a basic (yet scalable) folder structure and the basics to start writing powerful reactive applications with Angular and NGRX.\"),mdx(\"p\",null,\"For any clarifications or if there are things you\\u2019d do differently, feel free to send me an email or comment below.\"),mdx(\"h3\",null,\"Source Code\"),mdx(\"p\",null,\"The full source code of the project can be seen at \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Fgithub.com%2FGbuomprisco%2Fcryptofolio\"}),\"https://github.com/Gbuomprisco/cryptofolio\")),mdx(\"hr\",null),mdx(\"p\",null,\"Hope you enjoyed the article and leave a message if you agree, disagree, or if you would do anything differently!\"),mdx(\"hr\",null),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"If you enjoyed this article, follow me on\"),\" \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://medium.com/@.gc\"}),mdx(\"em\",{parentName:\"a\"},\"Medium\")),\" \",mdx(\"em\",{parentName:\"p\"},\"or\"),\" \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://medium.com/r/?url=https%3A%2F%2Ftwitter.com%2Fhome\"}),mdx(\"em\",{parentName:\"a\"},\"Twitter\")),\" \",mdx(\"em\",{parentName:\"p\"},\"for more articles about Angular, RxJS, Typescript and more!\")))}MDXContent.isMDXComponent=!0;\n","scope":{}},"series":[{"readingTime":"9 min read","live":true,"title":"Introduction","date":"2019-05-02T00:00:00.322Z","slug":"state-management-with-ngrx-introduction","coverImage":"/assets/images/posts/stae-managemen-with-ngrx.png","collection":"angular","excerpt":"An Introduction to the NGRX platform — Concepts, Best Practices, and Tips","series":"State Management with NgRx"},{"readingTime":"10 min read","live":true,"title":"Architecting the Store","date":"2019-05-05T00:00:00.322Z","slug":"architecting-the-store-in-ngrx","coverImage":"/assets/images/posts/architecting-store-ngrx.png","collection":"angular","excerpt":"A step-by-step guide to building and architecting the Store in NGRX","series":"State Management with NgRx"},{"readingTime":"6 min read","live":true,"title":"Building Side Effects","date":"2019-06-05T00:00:00.322Z","slug":"building-side-effects-in-ngrx","coverImage":"/assets/images/posts/cryptofolio-cover.gif","collection":"angular","excerpt":"Effects are one of the most powerful features in NGRX. Let’s see some practical examples, like calling an API or streaming real-time data","series":"State Management with NgRx"},{"readingTime":"10 min read","live":true,"title":"Abstracting State with Facades","date":"2019-06-27T00:00:00.322Z","slug":"abstracting-state-with-ngrx-facades","coverImage":"/assets/images/posts/state-management-with-ngrx.png","collection":"angular","excerpt":"Using Ngrx facades to connect your components with your state","series":"State Management with NgRx"}],"morePosts":[],"moreArticles":[{"readingTime":"2 min read","live":true,"title":"Benchmarking Angular 12 with Webpack 5","date":"2021-05-14T00:00:00.322Z","slug":"webpack-5-angular12","coverImage":"/assets/images/posts/benchmarking-webpack-5.webp","collection":"angular","excerpt":"Angular 12 has been released and with it the much awaited Webpack 5 upgrade. In this post I benchmarked the bundle-size and compilation speed against the previous version"},{"readingTime":"5 min read","live":true,"title":"Principles for creating libraries with Nx and Angular","date":"2021-02-07T00:00:00.322Z","slug":"how-to-organize-nx-modules-with-angular","coverImage":"/assets/images/posts/organize-nx-modules-ngrx.webp","collection":"angular","excerpt":"Working with Nx may be confusing. This article explains how I create Nx libraries and the principles behind my motivations"},{"readingTime":"3 min read","live":true,"title":"Where to put your Angular models?","date":"2020-08-03T00:00:00.322Z","slug":"angular-where-to-put-models","ogImage":{"url":"/assets/images/posts/where-put-angular-models.png"},"coverImage":"/assets/images/posts/where-put-angular-models.webp","collection":"angular","excerpt":"Organizing entities and models in your Angular app may be hard. This article explains where to put your entities and what mistakes to watch out for"},{"readingTime":"5 min read","live":true,"title":"Using the Intersection Observer API with Angular","date":"2020-08-01T00:00:00.322Z","slug":"intersection-observer-with-angular","coverImage":"/assets/images/posts/intersection-observer.webp","collection":"angular","excerpt":"This article shows how to build a directive with Angular that uses the Intersection Observer API to check when an element becomes visible on the page"},{"readingTime":"3 min read","live":true,"title":"Setters vs ngOnChanges: which one is better?","date":"2020-07-30T00:00:00.322Z","slug":"setters-vs-ng-on-changes","coverImage":"/assets/images/posts/setters-vs-on-changes.webp","collection":"angular","excerpt":"Listening to Input changes can be done in different ways. But which one should you use?"},{"readingTime":"3 min read","live":true,"title":"Async Rendering with a single Rx Operator","date":"2020-07-11T00:00:00.322Z","slug":"async-rendering-with-a-single-rx-operator","coverImage":"/assets/images/posts/async-rendering.webp","collection":"angular","excerpt":"Increase your app rendering performance with this simple Rx operator"}],"type":1},"__N_SSG":true},"page":"/[collection]/[slug]","query":{"collection":"angular","slug":"abstracting-state-with-ngrx-facades"},"buildId":"bodhziYrfVPHpHIu8xm2-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>