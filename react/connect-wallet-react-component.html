<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><link rel="dns-prefetch" href="//fonts.googleapis.com"/><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&amp;family=Merriweather:wght@300;400;700&amp;display=swap"/><link rel="canonical" href="https://giancarlobuomprisco.com/react/connect-wallet-react-component"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#212121"/><meta name="author" content="Giancarlo Buomprisco"/><meta property="og:site_name" content="giancarlobuomprisco.com"/><meta property="twitter:creator" content="@gc_psk"/><meta property="twitter:card" content="summary_large_image"/><title>A React Component to connect with MetaMask</title><meta property="og:type" content="article"/><meta property="og:title" content="A React Component to connect with MetaMask"/><meta property="article:published_time" content="2021-12-20T00:00:00.322Z"/><meta property="twitter:title" content="A React Component to connect with MetaMask"/><meta property="twitter:description" content="In this post, we are going to build a React button able to connect with a Metamask Wallet, and read the wallet&#x27;s selected address."/><meta property="twitter:image" content="https://giancarlobuomprisco.com/assets/images/posts/react-metamask.webp"/><meta property="og:description" content="In this post, we are going to build a React button able to connect with a Metamask Wallet, and read the wallet&#x27;s selected address."/><meta name="description" content="In this post, we are going to build a React button able to connect with a Metamask Wallet, and read the wallet&#x27;s selected address."/><meta property="og:image" content="https://giancarlobuomprisco.com/assets/images/posts/react-metamask.webp"/><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org/&quot;,&quot;@type&quot;:&quot;Article&quot;,&quot;mainEntityOfPage&quot;:{&quot;@type&quot;:&quot;WebPage&quot;,&quot;@id&quot;:&quot;https://google.com/article&quot;},&quot;image&quot;:[&quot;https://giancarlobuomprisco.com/assets/images/posts/react-metamask.webp&quot;],&quot;headline&quot;:&quot;A React Component to connect with MetaMask&quot;,&quot;description&quot;:&quot;In this post, we are going to build a React button able to connect with a Metamask Wallet, and read the wallet&#x27;s selected address.&quot;,&quot;author&quot;:{&quot;@type&quot;:&quot;Person&quot;,&quot;name&quot;:&quot;Giancarlo Buomprisco&quot;,&quot;url&quot;:&quot;https://twitter.com/@gc_psk&quot;},&quot;datePublished&quot;:&quot;2021-12-20T00:00:00.322Z&quot;}</script><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/babbd3d6a1200fa6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/babbd3d6a1200fa6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/088fb652bf056dbc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/088fb652bf056dbc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-27593bf8d60abcde.js" defer=""></script><script src="/_next/static/chunks/framework-93dc06fa7fcdddfb.js" defer=""></script><script src="/_next/static/chunks/main-e47b4831833660b7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8ff1c8d9702d8e84.js" defer=""></script><script src="/_next/static/chunks/501-5650b991910e93a7.js" defer=""></script><script src="/_next/static/chunks/506-aa1e672d93747f0a.js" defer=""></script><script src="/_next/static/chunks/176-f39945b2bedccf74.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcollection%5D/%5Bslug%5D-3af431d6a65604b7.js" defer=""></script><script src="/_next/static/IE3a-rQC8YjLC1fLXNwqd/_buildManifest.js" defer=""></script><script src="/_next/static/IE3a-rQC8YjLC1fLXNwqd/_ssgManifest.js" defer=""></script><script src="/_next/static/IE3a-rQC8YjLC1fLXNwqd/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><main><div style="--accent:#61DAFB;--accent-light:#61DAFB;--accent-contrast:#222"><div style="--from:#61dafb82;--to:#61DAFB" class="collection-branding-bar_gradient__1Ie5x"></div><div class="container mx-auto px-5"><div class="flex-row flex justify-between items-center py-2 md:py-4 mt-6 mb-8"><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-10 text-gray-800 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><div><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a></div><div class="flex justify-end"><span class="bg-gray-100 font-bold text-sm rounded-full shadow-xl flex items-center justify-center w-16 h-16">Close</span></div></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/blog">Blog</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/articles">Articles</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/consulting">Consulting</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/about">About</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/contact">Contact me</a></li></ul></div><article class="mb-16"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter md:leading-none mb-8 text-center">A React Component to connect with MetaMask</h1><div class="mb-6 flex space-x-3 items-center justify-center"><div style="--backgroundColor:#61DAFB;--color:#222" class="text-center flex flex-row space-x-1 items-center cursor-pointer justify-center px-2 py-1 rounded hover:shadow-md transition-shadow font-bold tag_Tag__tPe2P"><a class="flex flex-row space-x-1 items-center justify-center" href="/react"><img class="object-contain" loading="lazy" style="width:22px;height:22px" src="/assets/images/collections/react.webp" alt="React"/><span class="hover:underline">React</span></a></div><div style="--backgroundColor:#eee" class="text-center flex flex-row space-x-1 items-center cursor-pointer justify-center px-2 py-1 rounded hover:shadow-md transition-shadow font-bold tag_Tag__tPe2P"><a href="/tags/next">next</a></div><div style="--backgroundColor:#eee" class="text-center flex flex-row space-x-1 items-center cursor-pointer justify-center px-2 py-1 rounded hover:shadow-md transition-shadow font-bold tag_Tag__tPe2P"><a href="/tags/web3">web3</a></div></div><div class="max-w-2xl mx-auto mb-6"><div class="flex flex-row space-x-2 items-center justify-center"><div class="flex flex-row space-x-3 items-center"><a target="_blank" rel="noreferrer noopened" href="https://twitter.com/@gc_psk"><img width="50px" height="50px" src="/assets/giancarlo-2.png" alt="Giancarlo"/></a><a class="text-sm text-gray-600" target="_blank" rel="noreferrer noopened" href="https://twitter.com/@gc_psk">@gc_psk</a></div><span class="text-gray-600">·</span><div class="text-sm text-center text-gray-600"><time dateTime="2021-12-20T00:00:00.322Z">Dec 20, 2021</time></div><span class="text-gray-600">·</span><span class="text-gray-600 text-sm">6 min read</span></div></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="mx-auto w-12/12 lg:w-10/12 xl:w-8/12 justify-center"><div class="sm:mx-0"><img style="width:100%;height:auto" class="block shadow-xl rounded-md" src="/assets/images/posts/react-metamask.webp" alt="Cover Image for A React Component to connect with MetaMask" loading="lazy"/></div></div></div><div class="mb-12 max-w-2xl mx-auto"></div><div class="max-w-2xl mx-auto leading-loose markdown-styles_markdown__1x9gM"><p>Web3 is a new, revolutionary, and (very) controversial phenomenon, becoming harder and harder to ignore.</p><p>Whether you are fascinated by it or not, it&#x27;s undeniable that its consequences are far-reaching; many developers are re-training to get up to speed with it.</p><p>As I started working on a task for requesting users to connect their wallet to retrieve their MetaMask address, I had the opportunity to work with a Web3 wallet for the first time.</p><h2>What&#x27;s a Wallet?</h2><p>If you do not know what MetaMask is, here is a short explanation: MetaMask is a digital wallet living in your browser as an extension; you can use it to keep, transfer or move various cryptocurrencies and NFTs. </p><p>Furthermore, web3 websites can request to connect with said wallet, and if authorized, perform actions on behalf of the owners. </p><p>For example, you can connect the wallet to OpenSea (or any other marketplace) and buy an NFT, or connect to PancakeSwap to swap tokens with other ones.</p><h2>Building the Component</h2><p>While being a blockchain engineer involves writing custom <em>smart contracts</em>, protocols, etc., it&#x27;s slightly ironic that web3, as revolutionary as claimed, will still be primarily built using web2 technologies. </p><p>That means tons of Javascript (which is a little bit embarrassing to acknowledge when hacks happen due to this fact).</p><p>In short: <strong>we still need the good old Javascript</strong> to build on top of web3, so let&#x27;s see how we can get started with a simple component, which, thanks to the MetaMask wallet, allows us to <strong>request the user&#x27;s account of choice using the API</strong> exposed by the Chrome extension.</p><h3>Extending Window</h3><p>We need to extend the Window with the MetaMask API as we use Typescript.</p><p>The extension exposes an object named <code>ethereum</code> which provides the necessary API to interact with the wallet.</p><p>We will add the script below globally or within the same Component&#x27;s file:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
    ethereum<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>params<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
      <span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
      <span class="token generic-function"><span class="token function">removeListener</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
      selectedAddress<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>Component Basics</h3><p>And now we can start writing the component. </p><p>Let&#x27;s layout a basic <code>ConnectWalletButton</code> component:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">React</span></span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">ConnectWalletButton</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onConnect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">address<span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword nil">undefined</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onConnect <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// implementation</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token maybe-class-name">ConnectWalletButton</span><span class="token punctuation">;</span>
</code></pre></div><p>And now we can import it in our <code>App</code>:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">ConnectWalletButton</span></span> <span class="token keyword">from</span> <span class="token string">&quot;./ConnectWalletButton&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>selectedAddress<span class="token punctuation">,</span> setSelectedAddress<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> addressChanged <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">address<span class="token operator">:</span> string <span class="token operator">|</span> <span class="token keyword nil">undefined</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setSelectedAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Connect with MetaMask Demo</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ConnectWalletButton</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addressChanged<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We defined a callback to read the address from the button&#x27;s parent. </p><p>The above is a decent solution if you want to read the address locally. Otherwise, should you need to read it globally, it would be better to use any state-management tool like the <code>Context API</code> or more complex stuff like Zustand, Redux, etc.</p><p>Let&#x27;s add just enough CSS to make it look good-ish:</p><div class="remark-highlight"><pre class="language-css"><code class="language-css"><span class="token selector">button</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0.75</span><span class="token unit">rem</span> <span class="token number">1.5</span><span class="token unit">rem</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token unit">px</span><span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token unit">rem</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#03a9f4</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode color">#fff</span><span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> <span class="token number">600</span><span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button<span class="token pseudo-class">:hover</span></span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#039be5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">button<span class="token pseudo-class">:active</span></span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#0288d1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>Using the MetaMask Ethereum API</h3><p>And now on to the actual logic. </p><p>If you paid attention when we extended <code>Window</code>, we have added two methods to the <code>ethereum</code> global object (just enough to make this component work because there are a lot more).</p><ul><li>The first method is <code>request</code>: by calling it, we can request actions, which in this case will be <code>eth_requestAccounts</code></li><li>The second method is <code>on</code>: by calling it, we can listen to specific events, for example, when the wallet&#x27;s account has changed</li><li>The third method <code>removeListener</code> will be used to clean up the callback and avoid memory leaks when the component is unmounted</li></ul><h4>Goals</h4><p>What will the component do?</p><ul><li>Prompt users to Connect their wallet</li><li>Display the address if connected</li><li>Emit an event with the address when it changes</li><li>Automatically update if the user updates the address or disconnects from MetaMask</li></ul><h4>Implementation</h4><p>Let&#x27;s start implementing the goals above. </p><p>First, we want to check if the MetaMask extension is installed, otherwise we&#x27;ll run into runtime errors. For simplicity, we simply check if <code>window.ethereum</code> exists:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">function</span> <span class="token function">isMetaMaskInstalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token known-class-name class-name">Boolean</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">ethereum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then, we define an async function which lets us request and read the address from MetaMask:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> method <span class="token operator">=</span> <span class="token string">&quot;eth_requestAccounts&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> accounts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">ethereum</span><span class="token punctuation">.</span><span class="token property-access">request</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// for simplicity, let&#x27;s return the first account in the list</span>
  <span class="token keyword">return</span> accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getSelectedAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">ethereum</span><span class="token operator">?.</span>selectedAddress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We want to store the address because it can also mutate from the outside. </p><p>Because the wallet may already be connected when the component mounts, we initialize it with the property <code>selectedAddress</code>, if found:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token punctuation">[</span>address<span class="token punctuation">,</span> setAddress<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  <span class="token function">getSelectedAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Let&#x27;s define a function which will read and store the address:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token function-variable function">connectWallet</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> selectedAddress <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setAddress</span><span class="token punctuation">(</span>selectedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>selectedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>We now need to listen for changes from the extension so that we can update the component accordingly.</p><p>In fact, users can change the current address or disconnect the website using the MetaMask extension:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> eventName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">accountsChanged</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  
  <span class="token comment">// break if metamask not installed</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isMetaMaskInstalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">listener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>selectedAddress<span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setAddress</span><span class="token punctuation">(</span>selectedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span>selectedAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// listen for updates</span>
  <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">ethereum</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// clean up on unmount</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">ethereum</span><span class="token punctuation">.</span><span class="token method function property-access">removeListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>What happens here?</p><ul><li>we listen for updates using the <code>on</code> method, and update the current address using the first element in the list</li><li>when the component unmounts, we call the <code>removeListener</code> method so we can clean everything up</li></ul><p>Now, we can finally render our component. </p><p>If MetaMask is not installed, we warn user they cannot connect, and need to install the extension first:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isMetaMaskInstalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">No wallet found. Please install MetaMask.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">;</span>
<span class="token plain-text">}</span>
</code></pre></div><p>If a wallet is connected, we simply display its selected address:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">if</span> <span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Connected with </span><span class="token punctuation">{</span>address<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If a wallet is not connected, we prompt to connect:</p><div class="remark-highlight"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>connectWallet<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Connect Wallet</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div><h2>Demo</h2><p>Do you have a MetaMask wallet? </p><p>Awesome, you can try the demo below to try out the code we&#x27;ve written! Also, you can find the complete snippet:</p><div class="my-4"><div><span style="background-color:var(--accent);color:var(--accent-contrast" class="font-bold text-sm font-sans p-2 pb-4 rounded-tr-md rounded-tl-md">CodeSandbox Demo</span></div><iframe src="https://codesandbox.io/embed/react-component-connect-metamask-zpcql?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%;height:500px;border:0;overflow:hidden" title="condescending-tree-r0mki" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe></div><h2>Final Words</h2><p>I know, I know. Web3 is controversial. </p><p>I have some reservations myself, but with that said, I also feel like it&#x27;s good to keep an open mind about the technology and how it&#x27;s shaping up the new tools we&#x27;re going to use in the future probably.</p><p>I hope to make more posts about this as I dig further into the space. To the next one, ciao!</p></div></article><div class="max-w-2xl mx-auto"></div><div class="w-full md:w-8/12 mx-auto my-4"><script async="" data-uid="a9bf816709" src="https://thoughtful-inventor-7842.ck.page/a9bf816709/index.js"></script></div></div></div></main></div><footer><div class="container mx-auto px-5"><hr class="border-accent-2 mt-16 mb-14"/><div class="flex-row flex justify-between items-center py-2 md:py-4 mt-6 mb-8"><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-10 text-gray-800 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><div><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a></div><div class="flex justify-end"><span class="bg-gray-100 font-bold text-sm rounded-full shadow-xl flex items-center justify-center w-16 h-16">Close</span></div></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/blog">Blog</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/articles">Articles</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/consulting">Consulting</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/about">About</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/contact">Contact me</a></li></ul></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"live":true,"readingTime":"6 min read","title":"A React Component to connect with MetaMask","date":"2021-12-20T00:00:00.322Z","slug":"connect-wallet-react-component","coverImage":"/assets/images/posts/react-metamask.webp","collection":{"name":"React","primaryColor":"#61DAFB","primaryColorLight":"#61dafb82","contrastColor":"#222","logo":"/assets/images/collections/react.webp","emoji":"","slug":"react"},"excerpt":"In this post, we are going to build a React button able to connect with a Metamask Wallet, and read the wallet's selected address.","content":"\nWeb3 is a new, revolutionary, and (very) controversial phenomenon, becoming harder and harder to ignore.\n\nWhether you are fascinated by it or not, it's undeniable that its consequences are far-reaching; many developers are re-training to get up to speed with it.\n\nAs I started working on a task for requesting users to connect their wallet to retrieve their MetaMask address, I had the opportunity to work with a Web3 wallet for the first time.\n\n## What's a Wallet?\n\nIf you do not know what MetaMask is, here is a short explanation: MetaMask is a digital wallet living in your browser as an extension; you can use it to keep, transfer or move various cryptocurrencies and NFTs. \n\nFurthermore, web3 websites can request to connect with said wallet, and if authorized, perform actions on behalf of the owners. \n\nFor example, you can connect the wallet to OpenSea (or any other marketplace) and buy an NFT, or connect to PancakeSwap to swap tokens with other ones.\n\n## Building the Component\n\nWhile being a blockchain engineer involves writing custom *smart contracts*, protocols, etc., it's slightly ironic that web3, as revolutionary as claimed, will still be primarily built using web2 technologies. \n\nThat means tons of Javascript (which is a little bit embarrassing to acknowledge when hacks happen due to this fact).\n\nIn short: **we still need the good old Javascript** to build on top of web3, so let's see how we can get started with a simple component, which, thanks to the MetaMask wallet, allows us to **request the user's account of choice using the API** exposed by the Chrome extension.\n\n### Extending Window\n\nWe need to extend the Window with the MetaMask API as we use Typescript.\n\nThe extension exposes an object named `ethereum` which provides the necessary API to interact with the wallet.\n\nWe will add the script below globally or within the same Component's file:\n\n```tsx\ndeclare global {\n  interface Window {\n    ethereum: {\n      request\u003cT\u003e(params: { method: string }): Promise\u003cT\u003e;\n      on\u003cT\u003e(event: string, cb: (params: T) =\u003e void): void;\n      removeListener\u003cT\u003e(event: string, cb: (params: T) =\u003e void): void;\n      selectedAddress: string | undefined;\n    };\n  }\n}\n```\n\n### Component Basics\n\nAnd now we can start writing the component. \n\nLet's layout a basic `ConnectWalletButton` component:\n\n```tsx\nimport React from \"react\";\n\nconst ConnectWalletButton: React.FC\u003c{\n  onConnect: (address: string | undefined) =\u003e void\n}\u003e = ({ onConnect }) =\u003e {\n  // implementation\n};\n\nexport default ConnectWalletButton;\n```\n\nAnd now we can import it in our `App`:\n\n```tsx\nimport \"./styles.css\";\nimport ConnectWalletButton from \"./ConnectWalletButton\";\n\nexport default function App() {\n  const [selectedAddress, setSelectedAddress] = useState\u003cstring\u003e();\n  \n  const addressChanged = useCallback((address: string | undefined) =\u003e {\n    setSelectedAddress(address);\n  }, []);\n\n  return (\n    \u003cdiv className=\"App\"\u003e\n      \u003ch1\u003eConnect with MetaMask Demo\u003c/h1\u003e\n\n      \u003cConnectWalletButton onChange={addressChanged} /\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nWe defined a callback to read the address from the button's parent. \n\nThe above is a decent solution if you want to read the address locally. Otherwise, should you need to read it globally, it would be better to use any state-management tool like the `Context API` or more complex stuff like Zustand, Redux, etc.\n\nLet's add just enough CSS to make it look good-ish:\n\n```css\nbutton {\n  padding: 0.75rem 1.5rem;\n  border-radius: 30px;\n  font-size: 1rem;\n  background-color: #03a9f4;\n  color: #fff;\n  font-weight: 600;\n  border-width: 0;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #039be5;\n}\n\nbutton:active {\n  background-color: #0288d1;\n}\n```\n\n### Using the MetaMask Ethereum API\n\nAnd now on to the actual logic. \n\nIf you paid attention when we extended `Window`, we have added two methods to the `ethereum` global object (just enough to make this component work because there are a lot more).\n\n- The first method is `request`: by calling it, we can request actions, which in this case will be `eth_requestAccounts`\n- The second method is `on`: by calling it, we can listen to specific events, for example, when the wallet's account has changed\n- The third method `removeListener` will be used to clean up the callback and avoid memory leaks when the component is unmounted\n\n#### Goals\n\nWhat will the component do?\n- Prompt users to Connect their wallet\n- Display the address if connected\n- Emit an event with the address when it changes\n- Automatically update if the user updates the address or disconnects from MetaMask\n\n#### Implementation\n\nLet's start implementing the goals above. \n\nFirst, we want to check if the MetaMask extension is installed, otherwise we'll run into runtime errors. For simplicity, we simply check if `window.ethereum` exists:\n\n```tsx\nfunction isMetaMaskInstalled() {\n  return Boolean(window.ethereum);\n}\n```\n\nThen, we define an async function which lets us request and read the address from MetaMask:\n\n```tsx\nasync function readAddress() {\n  const method = \"eth_requestAccounts\";\n\n  const accounts = await window.ethereum.request\u003cstring[]\u003e({\n    method\n  });\n\n  // for simplicity, let's return the first account in the list\n  return accounts[0];\n}\n\nfunction getSelectedAddress() {\n  return window.ethereum?.selectedAddress;\n}\n```\n\nWe want to store the address because it can also mutate from the outside. \n\nBecause the wallet may already be connected when the component mounts, we initialize it with the property `selectedAddress`, if found:\n\n\n```tsx\nconst [address, setAddress] = useState\u003cstring\u003e(\n  getSelectedAddress()\n);\n```\n\nLet's define a function which will read and store the address:\n\n```tsx\nconst connectWallet = async () =\u003e {\n  const selectedAddress = await readAddress();\n\n  setAddress(selectedAddress);\n  onChange(selectedAddress);\n};\n```\n\nWe now need to listen for changes from the extension so that we can update the component accordingly.\n\nIn fact, users can change the current address or disconnect the website using the MetaMask extension:\n\n```tsx\nuseEffect(() =\u003e {\n  const eventName = `accountsChanged`;\n  \n  // break if metamask not installed\n  if (!isMetaMaskInstalled()) return;\n\n  const listener = ([selectedAddress]: string[]) =\u003e {\n    setAddress(selectedAddress);\n    onChange(selectedAddress);\n  };\n\n  // listen for updates\n  window.ethereum.on(eventName, listener);\n  \n  // clean up on unmount\n  return () =\u003e {\n    window.ethereum.removeListener(eventName, listener);\n  };\n}, []);\n```\n\nWhat happens here?\n- we listen for updates using the `on` method, and update the current address using the first element in the list\n- when the component unmounts, we call the `removeListener` method so we can clean everything up\n\nNow, we can finally render our component. \n\nIf MetaMask is not installed, we warn user they cannot connect, and need to install the extension first:\n\n```tsx\nif (!isMetaMaskInstalled()) {\n  return \u003cspan\u003eNo wallet found. Please install MetaMask.\u003cspan/\u003e;\n}\n```\n\nIf a wallet is connected, we simply display its selected address:\n\n```tsx\nif (address) {\n  return \u003cbutton\u003eConnected with {address}\u003c/button\u003e;\n}\n```\n\nIf a wallet is not connected, we prompt to connect:\n\n```tsx \nreturn \u003cbutton onClick={connectWallet}\u003eConnect Wallet\u003c/button\u003e;\n```\n\n## Demo\n\nDo you have a MetaMask wallet? \n\nAwesome, you can try the demo below to try out the code we've written! Also, you can find the complete snippet:\n\n\u003cCodeSandboxSnippet src='https://codesandbox.io/embed/react-component-connect-metamask-zpcql?fontsize=14\u0026hidenavigation=1\u0026theme=dark' /\u003e\n\n## Final Words\n\nI know, I know. Web3 is controversial. \n\nI have some reservations myself, but with that said, I also feel like it's good to keep an open mind about the technology and how it's shaping up the new tools we're going to use in the future probably.\n\nI hope to make more posts about this as I dig further into the space. To the next one, ciao!","tags":["react","next","web3"]},"content":{"compiledSource":"var l=Object.defineProperty,d=Object.defineProperties;var i=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var m=(e,n,s)=\u003en in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(e,n)=\u003e{for(var s in n||(n={}))o.call(n,s)\u0026\u0026m(e,s,n[s]);if(p)for(var s of p(n))c.call(n,s)\u0026\u0026m(e,s,n[s]);return e},r=(e,n)=\u003ed(e,i(n));var N=(e,n)=\u003e{var s={};for(var t in e)o.call(e,t)\u0026\u0026n.indexOf(t)\u003c0\u0026\u0026(s[t]=e[t]);if(e!=null\u0026\u0026p)for(var t of p(e))n.indexOf(t)\u003c0\u0026\u0026c.call(e,t)\u0026\u0026(s[t]=e[t]);return s};const makeShortcode=e=\u003efunction(s){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",a({},s))},CodeSandboxSnippet=makeShortcode(\"CodeSandboxSnippet\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:e}=t,n=N(t,[\"components\"]);return mdx(MDXLayout,r(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Web3 is a new, revolutionary, and (very) controversial phenomenon, becoming harder and harder to ignore.\"),mdx(\"p\",null,\"Whether you are fascinated by it or not, it's undeniable that its consequences are far-reaching; many developers are re-training to get up to speed with it.\"),mdx(\"p\",null,\"As I started working on a task for requesting users to connect their wallet to retrieve their MetaMask address, I had the opportunity to work with a Web3 wallet for the first time.\"),mdx(\"h2\",null,\"What's a Wallet?\"),mdx(\"p\",null,\"If you do not know what MetaMask is, here is a short explanation: MetaMask is a digital wallet living in your browser as an extension; you can use it to keep, transfer or move various cryptocurrencies and NFTs. \"),mdx(\"p\",null,\"Furthermore, web3 websites can request to connect with said wallet, and if authorized, perform actions on behalf of the owners. \"),mdx(\"p\",null,\"For example, you can connect the wallet to OpenSea (or any other marketplace) and buy an NFT, or connect to PancakeSwap to swap tokens with other ones.\"),mdx(\"h2\",null,\"Building the Component\"),mdx(\"p\",null,\"While being a blockchain engineer involves writing custom \",mdx(\"em\",{parentName:\"p\"},\"smart contracts\"),\", protocols, etc., it's slightly ironic that web3, as revolutionary as claimed, will still be primarily built using web2 technologies. \"),mdx(\"p\",null,\"That means tons of Javascript (which is a little bit embarrassing to acknowledge when hacks happen due to this fact).\"),mdx(\"p\",null,\"In short: \",mdx(\"strong\",{parentName:\"p\"},\"we still need the good old Javascript\"),\" to build on top of web3, so let's see how we can get started with a simple component, which, thanks to the MetaMask wallet, allows us to \",mdx(\"strong\",{parentName:\"p\"},\"request the user's account of choice using the API\"),\" exposed by the Chrome extension.\"),mdx(\"h3\",null,\"Extending Window\"),mdx(\"p\",null,\"We need to extend the Window with the MetaMask API as we use Typescript.\"),mdx(\"p\",null,\"The extension exposes an object named \",mdx(\"inlineCode\",{parentName:\"p\"},\"ethereum\"),\" which provides the necessary API to interact with the wallet.\"),mdx(\"p\",null,\"We will add the script below globally or within the same Component's file:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"declare\"),\" global \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"interface\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token class-name\"}),\"Window\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    ethereum`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"token generic-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"request\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token generic class-name\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token constant\"}),\"T\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\"))),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"params\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" method\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token known-class-name class-name\"}),\"Promise\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"T\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"token generic-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"on\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token generic class-name\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token constant\"}),\"T\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\"))),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"event\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"cb\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),\"params\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token constant\"}),\"T\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"void\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"void\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n      `,mdx(\"span\",a({parentName:\"code\"},{className:\"token generic-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"removeListener\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token generic class-name\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token constant\"}),\"T\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\"))),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"event\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"cb\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),\"params\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token constant\"}),\"T\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"void\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"void\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n      selectedAddress`,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"undefined\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"h3\",null,\"Component Basics\"),mdx(\"p\",null,\"And now we can start writing the component. \"),mdx(\"p\",null,\"Let's layout a basic \",mdx(\"inlineCode\",{parentName:\"p\"},\"ConnectWalletButton\"),\" component:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"import\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token imports\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"React\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"react\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"ConnectWalletButton\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token constant\"}),\"FC\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"onConnect\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),\"address\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" string \",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"|\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword nil\"}),\"undefined\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"void\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\" onConnect \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// implementation\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"ConnectWalletButton\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"And now we can import it in our \",mdx(\"inlineCode\",{parentName:\"p\"},\"App\"),\":\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"import\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"./styles.css\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"import\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token imports\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token maybe-class-name\"}),\"ConnectWalletButton\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"./ConnectWalletButton\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"App\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" setSelectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token generic-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"useState\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token generic class-name\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\"))),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  \n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" addressChanged \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"useCallback\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),\"address\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" string \",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"|\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword nil\"}),\"undefined\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"setSelectedAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"address\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"div\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"className\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-value\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation attr-equals\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"'),\"App\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),'\"')),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"})),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"      \"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"h1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"Connect with MetaMask Demo\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"h1\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"})),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"})),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"      \"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token class-name\"}),\"ConnectWalletButton\")),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"onChange\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token script language-javascript\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token script-punctuation punctuation\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\"addressChanged\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"/\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"})),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"    \"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"div\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"We defined a callback to read the address from the button's parent. \"),mdx(\"p\",null,\"The above is a decent solution if you want to read the address locally. Otherwise, should you need to read it globally, it would be better to use any state-management tool like the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Context API\"),\" or more complex stuff like Zustand, Redux, etc.\"),mdx(\"p\",null,\"Let's add just enough CSS to make it look good-ish:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-css\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-css\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token selector\"}),\"button\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"padding\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0.75\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token unit\"}),\"rem\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1.5\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token unit\"}),\"rem\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"border-radius\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"30\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token unit\"}),\"px\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"font-size\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token unit\"}),\"rem\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"background-color\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token hexcode color\"}),\"#03a9f4\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"color\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token hexcode color\"}),\"#fff\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"font-weight\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"600\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"border-width\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"cursor\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" pointer\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token selector\"}),\"button\",mdx(\"span\",a({parentName:\"span\"},{className:\"token pseudo-class\"}),\":hover\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"background-color\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token hexcode color\"}),\"#039be5\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token selector\"}),\"button\",mdx(\"span\",a({parentName:\"span\"},{className:\"token pseudo-class\"}),\":active\")),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"background-color\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token hexcode color\"}),\"#0288d1\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"h3\",null,\"Using the MetaMask Ethereum API\"),mdx(\"p\",null,\"And now on to the actual logic. \"),mdx(\"p\",null,\"If you paid attention when we extended \",mdx(\"inlineCode\",{parentName:\"p\"},\"Window\"),\", we have added two methods to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"ethereum\"),\" global object (just enough to make this component work because there are a lot more).\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"The first method is \",mdx(\"inlineCode\",{parentName:\"li\"},\"request\"),\": by calling it, we can request actions, which in this case will be \",mdx(\"inlineCode\",{parentName:\"li\"},\"eth_requestAccounts\")),mdx(\"li\",{parentName:\"ul\"},\"The second method is \",mdx(\"inlineCode\",{parentName:\"li\"},\"on\"),\": by calling it, we can listen to specific events, for example, when the wallet's account has changed\"),mdx(\"li\",{parentName:\"ul\"},\"The third method \",mdx(\"inlineCode\",{parentName:\"li\"},\"removeListener\"),\" will be used to clean up the callback and avoid memory leaks when the component is unmounted\")),mdx(\"h4\",null,\"Goals\"),mdx(\"p\",null,\"What will the component do?\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Prompt users to Connect their wallet\"),mdx(\"li\",{parentName:\"ul\"},\"Display the address if connected\"),mdx(\"li\",{parentName:\"ul\"},\"Emit an event with the address when it changes\"),mdx(\"li\",{parentName:\"ul\"},\"Automatically update if the user updates the address or disconnects from MetaMask\")),mdx(\"h4\",null,\"Implementation\"),mdx(\"p\",null,\"Let's start implementing the goals above. \"),mdx(\"p\",null,\"First, we want to check if the MetaMask extension is installed, otherwise we'll run into runtime errors. For simplicity, we simply check if \",mdx(\"inlineCode\",{parentName:\"p\"},\"window.ethereum\"),\" exists:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"isMetaMaskInstalled\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token known-class-name class-name\"}),\"Boolean\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token dom variable\"}),\"window\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"ethereum\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"Then, we define an async function which lets us request and read the address from MetaMask:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"async\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"readAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" method \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"eth_requestAccounts\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" accounts \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"await\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token dom variable\"}),\"window\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"ethereum\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"request\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    method\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// for simplicity, let's return the first account in the list\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" accounts\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getSelectedAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token dom variable\"}),\"window\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"ethereum\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"?.\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"We want to store the address because it can also mutate from the outside. \"),mdx(\"p\",null,\"Because the wallet may already be connected when the component mounts, we initialize it with the property \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedAddress\"),\", if found:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"address\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" setAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token generic-function\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"useState\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token generic class-name\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003c\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin\"}),\"string\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"\u003e\"))),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"getSelectedAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"Let's define a function which will read and store the address:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"connectWallet\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"async\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" selectedAddress \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"await\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"readAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"setAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"onChange\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"We now need to listen for changes from the extension so that we can update the component accordingly.\"),mdx(\"p\",null,\"In fact, users can change the current address or disconnect the website using the MetaMask extension:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"useEffect\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" eventName \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token template-string\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token template-punctuation string\"}),\"`\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"accountsChanged\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token template-punctuation string\"}),\"`\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  \n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// break if metamask not installed\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"if\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"!\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"isMetaMaskInstalled\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function-variable function\"}),\"listener\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token parameter\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"[\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\":\"),\" string\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"]\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"setAddress\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"onChange\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"selectedAddress\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// listen for updates\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token dom variable\"}),\"window\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"ethereum\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token method function property-access\"}),\"on\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"eventName\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" listener\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  \n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// clean up on unmount\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token arrow operator\"}),\"=\u003e\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token dom variable\"}),\"window\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token property-access\"}),\"ethereum\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token method function property-access\"}),\"removeListener\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"eventName\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" listener\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"What happens here?\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"we listen for updates using the \",mdx(\"inlineCode\",{parentName:\"li\"},\"on\"),\" method, and update the current address using the first element in the list\"),mdx(\"li\",{parentName:\"ul\"},\"when the component unmounts, we call the \",mdx(\"inlineCode\",{parentName:\"li\"},\"removeListener\"),\" method so we can clean everything up\")),mdx(\"p\",null,\"Now, we can finally render our component. \"),mdx(\"p\",null,\"If MetaMask is not installed, we warn user they cannot connect, and need to install the extension first:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"if\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"!\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"isMetaMaskInstalled\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"span\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"No wallet found. Please install MetaMask.\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"span\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"/\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"}\"),`\n`))),mdx(\"p\",null,\"If a wallet is connected, we simply display its selected address:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"if\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"address\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"button\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"Connected with \"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\"address\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"button\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"If a wallet is not connected, we prompt to connect:\"),mdx(\"div\",a({},{className:\"remark-highlight\"}),mdx(\"pre\",a({parentName:\"div\"},{className:\"language-tsx\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-tsx\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c\"),\"button\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token attr-name\"}),\"onClick\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token script language-javascript\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token script-punctuation punctuation\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\"connectWallet\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token plain-text\"}),\"Connect Wallet\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token tag\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003c/\"),\"button\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\u003e\")),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"h2\",null,\"Demo\"),mdx(\"p\",null,\"Do you have a MetaMask wallet? \"),mdx(\"p\",null,\"Awesome, you can try the demo below to try out the code we've written! Also, you can find the complete snippet:\"),mdx(CodeSandboxSnippet,{src:\"https://codesandbox.io/embed/react-component-connect-metamask-zpcql?fontsize=14\u0026hidenavigation=1\u0026theme=dark\",mdxType:\"CodeSandboxSnippet\"}),mdx(\"h2\",null,\"Final Words\"),mdx(\"p\",null,\"I know, I know. Web3 is controversial. \"),mdx(\"p\",null,\"I have some reservations myself, but with that said, I also feel like it's good to keep an open mind about the technology and how it's shaping up the new tools we're going to use in the future probably.\"),mdx(\"p\",null,\"I hope to make more posts about this as I dig further into the space. To the next one, ciao!\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"series":[],"morePosts":[{"live":true,"readingTime":"4 min read","title":"A conditional rendering Component for React","date":"2021-12-02T14:52:20.000Z","slug":"conditional-rendering-component-for-react","collection":{"name":"React","primaryColor":"#61DAFB","primaryColorLight":"#61dafb82","contrastColor":"#222","logo":"/assets/images/collections/react.webp","emoji":"","slug":"react"},"excerpt":"This post shows how to create a React component to render components conditionally."}],"moreArticles":[],"type":1},"__N_SSG":true},"page":"/[collection]/[slug]","query":{"collection":"react","slug":"connect-wallet-react-component"},"buildId":"IE3a-rQC8YjLC1fLXNwqd","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script async="" defer="" src="https://www.googletagmanager.com/gtag/js"></script><script id="gtmDataLayer">
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-172483071-1');
</script></body></html>