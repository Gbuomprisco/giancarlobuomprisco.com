<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><link rel="dns-prefetch" href="//fonts.googleapis.com"/><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&amp;family=Merriweather:wght@300;400;700&amp;display=swap"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#212121"/><meta name="author" content="Giancarlo Buomprisco"/><meta property="og:site_name" content="giancarlobuomprisco.com"/><meta property="twitter:creator" content="@gc_psk"/><meta property="twitter:card" content="summary_large_image"/><title>5 common mistakes with RxJS</title><meta property="og:type" content="article"/><meta property="og:title" content="5 common mistakes with RxJS"/><meta property="article:published_time" content="2020-08-03T00:00:00.322Z"/><meta property="twitter:title" content="5 common mistakes with RxJS"/><meta property="twitter:description" content="A list of common mistakes while using RxJS, and explanations on what to do instead"/><meta property="twitter:image" content="https://giancarlobuomprisco.comhttps://miro.medium.com/max/1400/1*SZ7Ubdlu8CbNjvI8-LezVw.jpeg"/><meta property="og:description" content="A list of common mistakes while using RxJS, and explanations on what to do instead"/><meta name="description" content="A list of common mistakes while using RxJS, and explanations on what to do instead"/><link rel="canonical" href="https://blog.bitsrc.io/5-common-mistakes-with-rxjs-1b09d4c19387"/><meta property="og:image" content="https://giancarlobuomprisco.comhttps://miro.medium.com/max/1400/1*SZ7Ubdlu8CbNjvI8-LezVw.jpeg"/><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org/&quot;,&quot;@type&quot;:&quot;Article&quot;,&quot;mainEntityOfPage&quot;:{&quot;@type&quot;:&quot;WebPage&quot;,&quot;@id&quot;:&quot;https://google.com/article&quot;},&quot;image&quot;:[&quot;https://giancarlobuomprisco.comhttps://miro.medium.com/max/1400/1*SZ7Ubdlu8CbNjvI8-LezVw.jpeg&quot;],&quot;headline&quot;:&quot;5 common mistakes with RxJS&quot;,&quot;description&quot;:&quot;A list of common mistakes while using RxJS, and explanations on what to do instead&quot;,&quot;author&quot;:{&quot;@type&quot;:&quot;Person&quot;,&quot;name&quot;:&quot;Giancarlo Buomprisco&quot;,&quot;url&quot;:&quot;https://twitter.com/@gc_psk&quot;},&quot;datePublished&quot;:&quot;2020-08-03T00:00:00.322Z&quot;}</script><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/babbd3d6a1200fa6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/babbd3d6a1200fa6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/088fb652bf056dbc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/088fb652bf056dbc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-27593bf8d60abcde.js" defer=""></script><script src="/_next/static/chunks/framework-93dc06fa7fcdddfb.js" defer=""></script><script src="/_next/static/chunks/main-e47b4831833660b7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8ff1c8d9702d8e84.js" defer=""></script><script src="/_next/static/chunks/501-5650b991910e93a7.js" defer=""></script><script src="/_next/static/chunks/506-aa1e672d93747f0a.js" defer=""></script><script src="/_next/static/chunks/176-f39945b2bedccf74.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bcollection%5D/%5Bslug%5D-3af431d6a65604b7.js" defer=""></script><script src="/_next/static/VJR1LKqYQjlR7buPFNI2Z/_buildManifest.js" defer=""></script><script src="/_next/static/VJR1LKqYQjlR7buPFNI2Z/_ssgManifest.js" defer=""></script><script src="/_next/static/VJR1LKqYQjlR7buPFNI2Z/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><main><div style="--accent:#d81b60;--accent-light:#d81b60;--accent-contrast:#fff"><div style="--from:#d81b6085;--to:#d81b60" class="collection-branding-bar_gradient__1Ie5x"></div><div class="container mx-auto px-5"><div class="flex-row flex justify-between items-center py-2 md:py-4 mt-6 mb-8"><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-10 text-gray-800 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><div><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a></div><div class="flex justify-end"><span class="bg-gray-100 font-bold text-sm rounded-full shadow-xl flex items-center justify-center w-16 h-16">Close</span></div></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/blog">Blog</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/articles">Articles</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/consulting">Consulting</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/about">About</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/contact">Contact me</a></li></ul></div><article class="mb-16"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter md:leading-none mb-8 text-center">5 common mistakes with RxJS</h1><div class="mb-6 flex space-x-3 items-center justify-center"><div style="--backgroundColor:#d81b60;--color:#fff" class="text-center flex flex-row space-x-1 items-center cursor-pointer justify-center px-2 py-1 rounded hover:shadow-md transition-shadow font-bold tag_Tag__tPe2P"><a class="flex flex-row space-x-1 items-center justify-center" href="/rxjs"><img class="object-contain" loading="lazy" style="width:22px;height:22px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></a></div></div><div class="max-w-2xl mx-auto mb-6"><div class="flex flex-row space-x-2 items-center justify-center"><div class="flex flex-row space-x-3 items-center"><a target="_blank" rel="noreferrer noopened" href="https://twitter.com/@gc_psk"><img width="50px" height="50px" src="/assets/giancarlo-2.png" alt="Giancarlo"/></a><a class="text-sm text-gray-600" target="_blank" rel="noreferrer noopened" href="https://twitter.com/@gc_psk">@gc_psk</a></div><span class="text-gray-600">·</span><div class="text-sm text-center text-gray-600"><time dateTime="2020-08-03T00:00:00.322Z">Aug 3, 2020</time></div><span class="text-gray-600">·</span><span class="text-gray-600 text-sm">6 min read</span></div></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="mx-auto w-12/12 lg:w-10/12 xl:w-8/12 justify-center"><div class="sm:mx-0"><img style="width:100%;height:auto" class="block shadow-xl rounded-md" src="https://miro.medium.com/max/1400/1*SZ7Ubdlu8CbNjvI8-LezVw.jpeg" alt="Cover Image for 5 common mistakes with RxJS" loading="lazy"/></div></div></div><div class="mb-12 max-w-2xl mx-auto"></div><div class="max-w-2xl mx-auto leading-loose markdown-styles_markdown__1x9gM"><p>This post was originally published, by myself, on the <a href="https://blog.bitsrc.io/5-common-mistakes-with-rxjs-1b09d4c19387" target="_blank" rel="noopener noreferrer">Bit</a> blog</p><p>As a Consultant, I’ve had the privilege to work with many teams and projects in a relatively short amount of time.</p><p>This not only allowed me to learn a lot from the existing codebases and team members but also to understand the biggest mistakes committed by the teams who weren’t very familiar with Rx and Angular.</p><h2>1) Not Unsubscribing</h2><p>I and many others have talked at length about the subject, but this is still the most common mistake I normally see — i.e. not unsubscribing from a stream at all.</p><p>This has various consequences such as:</p><ul><li>Causing memory leaks</li><li>Causing unwanted callbacks being called</li><li>Potentially, causing serious bugs in your app</li></ul><p>The best and most elegant way to unsubscribe from Observable is using a subject that emits a value when the component is destroyed.</p><p>Alternatively, you can maintain a class property on your component with the subscription, and unsubscribe it when the component is destroyed.</p><p>It’s pretty important, don’t forget.</p><h2>2) Omitting an initial value</h2><p>This happens pretty commonly with Angular forms. Say you subscribe to a stream expecting to get the value — but you never get one. How is that possible?</p><p>Well — sometimes it’s caused by the fact that the stream was not initialized by an initial value, and an event was never dispatched.</p><p>Here’s a common scenario with Angular’s forms:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">&#x27;Giancarlo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> formGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> valueChanges$ <span class="token operator">=</span> formGroup<span class="token punctuation">.</span>valueChanges<span class="token punctuation">;</span>

valueChanges<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Unless the user changes the <code>name</code> FormControl in some way, the callback will never be called.</p><p>But — we do want the subscription to emit using the initial value of the <code>FormGroup</code> (and many would expect it to do so).</p><p>In this case, we need to push an initial value using the operator <code>startWith</code>:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> valueChanges$ <span class="token operator">=</span> formGroup<span class="token punctuation">.</span>valueChanges<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">startWith</span><span class="token punctuation">(</span>formGroup<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

valueChanges<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this case, we will receive an emission using the initial value of the form, and all the changes emitted after that.</p><h2>3) Using the wrong Operators</h2><p>There are a lot of operators out there — and while you certainly don’t need to learn them all, you need to make sure you understand the details of each one that you are using.</p><p>Small differences can have big consequences.</p><h3>Example: mergeMap vs switchMap</h3><p>One of the most commonly used operators is <code>mergeMap</code>. This operator allows you to flatten an inner Observable and will maintain many active streams for each event: this is great in some situations, and not very ideal in others.</p><p>In many cases, you may want to instead maintain only 1 active subscription. For example, if you have an event whose events call an HTTP endpoint, you may want to cancel the outgoing requests and only call the very latest one: in this case, you’ll be better off with <code>switchMap</code>.</p><p>If you’re not careful, <code>mergeMap</code> may cause duplicate and unwanted subscriptions, while <code>switchMap</code> can lead to race conditions. Ultimately, both may lead to bugs and your code malfunctioning.</p><p>This is one example of the many, sometimes tiny, differences that make RxJS operators.</p><p>As I said above — you do not need to know every Rx operator. You do need, though, to understand the small peculiarities of the ones you’re using and compare with similar others to understand which one is suitable in your case.</p><p>Other notable differences you should be aware of:</p><ul><li><code>zip</code> vs <code>forkJoin</code> vs <code>combineLatest</code> vs r`ace</li><li><code>merge</code> vs <code>combineLatest</code></li><li><code>timer</code> vs <code>interval</code></li><li><code>never</code> vs <code>empty</code></li><li><code>of</code> vs <code>from</code></li><li><code>buffer</code> vs <code>window</code></li></ul><h2>4) Using the wrong type of Subject</h2><p>Another important mistake not to commit is to not choose the wrong type of Subject for your task.</p><p>Subjects are a special type of Observables that allow you to push values in the stream and also retrieve them by subscribing to it.</p><p>While normal <code>Subject</code> likely cover most situations, there are slight differences that you should be aware of.</p><h3>Late Subscribers</h3><p>One common scenario is when your Subject emits events before an observer subscribes to its changes. </p><p>If you’re expecting your subscriber to receive the data, you’re out of luck: it won’t.
In this kind of scenario, you should instead opt for a <code>ReplaySubject</code>, which is able to replay all the events it received to also late subscribers. </p><p>It is particularly useful also when you only want to keep the latest value in memory which you can do by defining its buffer size.</p><p>Another alternative is the <code>BehaviorSubject</code> — which instead requires a value in order to be defined.</p><h2>5) Performing imperative logic inside the Subscription callback</h2><p>One of the greatest things about RxJs is that combining operators and reusing their logic is an incredibly nice (and easy) way to build reusable bits of code.</p><p>Many of the benefits from writing Rx code ends once we subscribe to an Observable: the logic we write within subscription callbacks is not Rx-land and it’s the beginning of the end of FRP in our code.</p><p>I am not saying you should never subscribe, of course, but my recommendation is to keep the logic within the subscription callbacks as small as possible — and wherever you can, avoid subscribing directly (for example, using the Angular async pipe).</p><p>What are the drawbacks of using logic within subscriptions?</p><h3>Limited Reusability</h3><p>RxJS streams are pipeable, which means they can be combined and extended and therefore reused.</p><p>Any time you subscribe and perform logic within the subscription, you take away some logic that instead could have been offloaded to an Rx operator:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> allItems$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>items$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> doneItems$ <span class="token operator">=</span> allItems$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
   <span class="token function">map</span><span class="token punctuation">(</span>items <span class="token operator">=&gt;</span> items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> numberOfRemainingItems$ <span class="token operator">=</span> <span class="token function">combineLatest</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>allItems$<span class="token punctuation">,</span> doneItems$<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
   <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>items<span class="token punctuation">,</span> doneItems<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> items <span class="token operator">-</span> doneItems<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>As you can see, creating intermediate streams, or offloading logic to separate operators, is an awesome way of reusing logic across your application.</p><p>As a rule of thumb:</p><ul><li>do not check whether a value is truthy within your subscription, you can easily handle it with the operator <code>filter(Boolean)</code></li><li>don’t transform data in your subscription</li><li>side effects: for example, showing/hiding a loading icon, can be done with the <code>tap</code> or/and the <code>finalize</code> operators</li></ul><h3>Less Declarative</h3><p>Let’s see an example between an imperative and a declarative snippet:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">UsersDashboardComponent</span> <span class="token punctuation">{</span>
  users<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  activeUsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  bannedUsers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> service<span class="token operator">:</span> UsersService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>users$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>users <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>users <span class="token operator">=</span> users<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>activeUsers <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>bannedUsers <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>banned<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now, let’s convert the above declarative streams:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">UsersDashboardComponent</span> <span class="token punctuation">{</span>
  users$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>users$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  activeUsers$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span>users <span class="token operator">=&gt;</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  bannedUsers$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>users$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span>users <span class="token operator">=&gt;</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>banned<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> service<span class="token operator">:</span> UsersService<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>With that said, don’t forget to subscribe either, otherwise, your observables will never emit.</p><h2>Final Words</h2><p>Rx is a pretty awesome library and a tool that can help you handle complex asynchronous aspects of your application with ease. It’s also quite big, and most often misunderstood.</p><p>Making sure you follow the recommendations above will at least ensure that you’re taking care of an extremely common cause of mistakes, or bugs that you spend hours trying to fix.</p><p>In summary:</p><ul><li>Unsubscribe, always</li><li>Don’t omit an initial value if you expect one</li><li>Learn well the operators that you’re using. Small differences can lead to big mistakes.</li><li>Use the right type of <code>Subject</code>: they are suited for different use-cases</li><li>Write as much logic as possible declaratively and within your streams. Also, reuse the logic with custom operators or intermediate streams.</li></ul></div></article><div class="max-w-2xl mx-auto"></div><div class="w-full md:w-8/12 mx-auto my-4"><script async="" data-uid="3e3126f064" src="https://thoughtful-inventor-7842.ck.page/3e3126f064/index.js"></script></div><div><hr class="border-accent-2 mt-16 mb-14"/><h3 class="text-2xl md:text-3xl text-center font-semibold my-4 md:my-12 flex flex-row space-x-4 items-center justify-center"><span>Learn more about</span> <div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:28px;height:28px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 md:gap-x-12 lg:gap-x-14 gap-y-16 md:gap-y-18 mb-16"><div class="shadow rounded-md hover:shadow-xl transition-shadow duration-500"><div class="mb-3"><div class="sm:mx-0"><a aria-label="A Reactive Enum with Typescript and RxJs" href="/rxjs/reactive-enum-typescript-rxjs"><img class="block transition-shadow duration-500 h-full w-full lg:h-48 xl:h-48 rounded-t-md" src="/assets/images/posts/reactive-enum-ts-rxjs.webp" alt="Cover Image for A Reactive Enum with Typescript and RxJs" loading="lazy"/></a></div></div><div class="px-4 py-2"><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/rxjs/reactive-enum-typescript-rxjs">A Reactive Enum with Typescript and RxJs</a></h3></div><div class="text-xs mb-4 flex flex-row space-x-2 items-center px-4"><div class="text-gray-600"><time dateTime="2021-11-11T23:00:00.000Z">Nov 12, 2021</time></div><span class="text-gray-600">·</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></div></div><p class="leading-relaxed mb-4 px-4 text-sm">Typescript&#x27;s template literals&#x27; types allow us to generate dynamic and typed code, together. In this article, I want to show how we can build a dynamic reactive enum with TS and RxJS</p></div><div class="shadow rounded-md hover:shadow-xl transition-shadow duration-500"><div class="mb-3"><div class="sm:mx-0"><a aria-label="Caching RxJS streams into Web Storage" href="/rxjs/caching-rxjs-streams-into-web-storage"><img class="block transition-shadow duration-500 h-full w-full lg:h-48 xl:h-48 rounded-t-md" src="/assets/caching-rxjs-streams.webp" alt="Cover Image for Caching RxJS streams into Web Storage" loading="lazy"/></a></div></div><div class="px-4 py-2"><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/rxjs/caching-rxjs-streams-into-web-storage">Caching RxJS streams into Web Storage</a></h3></div><div class="text-xs mb-4 flex flex-row space-x-2 items-center px-4"><div class="text-gray-600"><time dateTime="2021-11-10T23:00:00.000Z">Nov 11, 2021</time></div><span class="text-gray-600">·</span><span class="text-gray-600">8 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></div></div><p class="leading-relaxed mb-4 px-4 text-sm">In this article I will introduce you to a simple utility that allows you to cache RxJS streams in memory or the browser&#x27;s storage</p></div><div class="shadow rounded-md hover:shadow-xl transition-shadow duration-500"><div class="mb-3"><div class="sm:mx-0"><a aria-label="RxJS Subjects in Depth" href="/rxjs/rxjs-subjects-in-depth"><img class="block transition-shadow duration-500 h-full w-full lg:h-48 xl:h-48 rounded-t-md" src="https://cdn-images-1.medium.com/max/14720/0*15QkEYFTChBSrv-J" alt="Cover Image for RxJS Subjects in Depth" loading="lazy"/></a></div></div><div class="px-4 py-2"><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/rxjs/rxjs-subjects-in-depth">RxJS Subjects in Depth</a></h3></div><div class="text-xs mb-4 flex flex-row space-x-2 items-center px-4"><div class="text-gray-600"><time dateTime="2019-10-15T00:00:00.000Z">Oct 15, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">7 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></div></div><p class="leading-relaxed mb-4 px-4 text-sm">Learn how RxJS Subjects are used in real-world applications</p></div><div class="shadow rounded-md hover:shadow-xl transition-shadow duration-500"><div class="mb-3"><div class="sm:mx-0"><a aria-label="RxJS Patterns: Efficiency and Performance" href="/rxjs/rxjs-patterns-efficiency-and-performance"><img class="block transition-shadow duration-500 h-full w-full lg:h-48 xl:h-48 rounded-t-md" src="https://cdn-images-1.medium.com/max/8120/0*s2vR3V3jI171miko" alt="Cover Image for RxJS Patterns: Efficiency and Performance" loading="lazy"/></a></div></div><div class="px-4 py-2"><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/rxjs/rxjs-patterns-efficiency-and-performance">RxJS Patterns: Efficiency and Performance</a></h3></div><div class="text-xs mb-4 flex flex-row space-x-2 items-center px-4"><div class="text-gray-600"><time dateTime="2019-09-16T00:00:00.000Z">Sep 16, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">9 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></div></div><p class="leading-relaxed mb-4 px-4 text-sm">A rundown of all RxJS operators and techniques you can leverage to avoid needless computation and make your code snappier and faster</p></div><div class="shadow rounded-md hover:shadow-xl transition-shadow duration-500"><div class="mb-3"><div class="sm:mx-0"><a aria-label="A simple Countdown with RxJS" href="/rxjs/a-simple-countdown-with-rx-js"><img class="block transition-shadow duration-500 h-full w-full lg:h-48 xl:h-48 rounded-t-md" src="/assets/images/posts/rxjs-countdown.gif" alt="Cover Image for A simple Countdown with RxJS" loading="lazy"/></a></div></div><div class="px-4 py-2"><h3 class="text-2xl font-bold mb-2 leading-snug"><a class="hover:underline" href="/rxjs/a-simple-countdown-with-rx-js">A simple Countdown with RxJS</a></h3></div><div class="text-xs mb-4 flex flex-row space-x-2 items-center px-4"><div class="text-gray-600"><time dateTime="2019-06-05T00:00:00.322Z">Jun 5, 2019</time></div><span class="text-gray-600">·</span><span class="text-gray-600">5 min read</span><span class="text-gray-600">·</span><div class="text-xs"><div class="text-center flex flex-row space-x-1 items-center cursor-pointer collection--rxjs" href="/rxjs"><img class="object-contain" loading="lazy" style="width:16px;height:16px" src="/assets/images/collections/rxjs.webp" alt="RxJs"/><span class="hover:underline">RxJs</span></div></div></div><p class="leading-relaxed mb-4 px-4 text-sm">In this tutorial, we’re going to build a very simple timer application with only a few lines of code using RxJS</p></div></div></div></div></div></main></div><footer><div class="container mx-auto px-5"><hr class="border-accent-2 mt-16 mb-14"/><div class="flex-row flex justify-between items-center py-2 md:py-4 mt-6 mb-8"><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a><div class="justify-end lg:hidden flex"><button aria-label="Open Menu" class="navbar-burger" type="button"><span class="block relative w-7 rounded-sm bg-black h-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span><span class="block relative w-7 rounded-sm bg-black h-1 mt-1"></span></button></div><ul class="lg:space-x-10 text-gray-800 px-4 hidden flex-col space-y-4 lg:space-y-0 lg:flex lg:flex-row nav"><li class="flex flex-row justify-between mb-6 lg:hidden"><div><a class="hover:underline" href="/"><b>GIANCARLO</b><span>BUOMPRISCO</span></a></div><div class="flex justify-end"><span class="bg-gray-100 font-bold text-sm rounded-full shadow-xl flex items-center justify-center w-16 h-16">Close</span></div></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/blog">Blog</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/articles">Articles</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/consulting">Consulting</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/about">About</a></li><li class="text-lg lg:text-base border-b-4 pb-1 border-b-transparent transition:border hover:text-gray-900 font-medium border-b-transparent hover:border-b-yellow-200"><a class="block" href="/contact">Contact me</a></li></ul></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"live":true,"readingTime":"6 min read","title":"5 common mistakes with RxJS","date":"2020-08-03T00:00:00.322Z","slug":"five-common-mistakes-with-rxjs","coverImage":"https://miro.medium.com/max/1400/1*SZ7Ubdlu8CbNjvI8-LezVw.jpeg","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"A list of common mistakes while using RxJS, and explanations on what to do instead","content":"\nThis post was originally published, by myself, on the [Bit](https://blog.bitsrc.io/5-common-mistakes-with-rxjs-1b09d4c19387) blog\n\nAs a Consultant, I’ve had the privilege to work with many teams and projects in a relatively short amount of time.\n\nThis not only allowed me to learn a lot from the existing codebases and team members but also to understand the biggest mistakes committed by the teams who weren’t very familiar with Rx and Angular.\n\n## 1) Not Unsubscribing\n\nI and many others have talked at length about the subject, but this is still the most common mistake I normally see — i.e. not unsubscribing from a stream at all.\n\nThis has various consequences such as:\n- Causing memory leaks\n- Causing unwanted callbacks being called\n- Potentially, causing serious bugs in your app\n\nThe best and most elegant way to unsubscribe from Observable is using a subject that emits a value when the component is destroyed.\n\nAlternatively, you can maintain a class property on your component with the subscription, and unsubscribe it when the component is destroyed.\n\nIt’s pretty important, don’t forget.\n\n## 2) Omitting an initial value\n\nThis happens pretty commonly with Angular forms. Say you subscribe to a stream expecting to get the value — but you never get one. How is that possible?\n\nWell — sometimes it’s caused by the fact that the stream was not initialized by an initial value, and an event was never dispatched.\n\nHere’s a common scenario with Angular’s forms:\n\n```typescript\nconst name = new FormControl('Giancarlo');\nconst formGroup = new FormGroup({ name });\nconst valueChanges$ = formGroup.valueChanges;\n\nvalueChanges.subscribe((value) =\u003e {\n    // do something\n});\n```\n\nUnless the user changes the `name` FormControl in some way, the callback will never be called.\n\nBut — we do want the subscription to emit using the initial value of the `FormGroup` (and many would expect it to do so).\n\nIn this case, we need to push an initial value using the operator `startWith`:\n\n```typescript\nconst valueChanges$ = formGroup.valueChanges.pipe(\n  startWith(formGroup.value)\n);\n\nvalueChanges.subscribe((value) =\u003e {\n    // do something\n});\n```\n\nIn this case, we will receive an emission using the initial value of the form, and all the changes emitted after that.\n\n## 3) Using the wrong Operators\n\nThere are a lot of operators out there — and while you certainly don’t need to learn them all, you need to make sure you understand the details of each one that you are using.\n\nSmall differences can have big consequences.\n\n\n### Example: mergeMap vs switchMap\n\nOne of the most commonly used operators is `mergeMap`. This operator allows you to flatten an inner Observable and will maintain many active streams for each event: this is great in some situations, and not very ideal in others.\n\nIn many cases, you may want to instead maintain only 1 active subscription. For example, if you have an event whose events call an HTTP endpoint, you may want to cancel the outgoing requests and only call the very latest one: in this case, you’ll be better off with `switchMap`.\n\nIf you’re not careful, `mergeMap` may cause duplicate and unwanted subscriptions, while `switchMap` can lead to race conditions. Ultimately, both may lead to bugs and your code malfunctioning.\n\nThis is one example of the many, sometimes tiny, differences that make RxJS operators.\n\nAs I said above — you do not need to know every Rx operator. You do need, though, to understand the small peculiarities of the ones you’re using and compare with similar others to understand which one is suitable in your case.\n\nOther notable differences you should be aware of:\n- `zip` vs `forkJoin` vs `combineLatest` vs r`ace\n- `merge` vs `combineLatest`\n- `timer` vs `interval`\n- `never` vs `empty`\n- `of` vs `from`\n- `buffer` vs `window`\n\n## 4) Using the wrong type of Subject\n\nAnother important mistake not to commit is to not choose the wrong type of Subject for your task.\n\nSubjects are a special type of Observables that allow you to push values in the stream and also retrieve them by subscribing to it.\n\nWhile normal `Subject` likely cover most situations, there are slight differences that you should be aware of.\n\n### Late Subscribers\n\nOne common scenario is when your Subject emits events before an observer subscribes to its changes. \n\nIf you’re expecting your subscriber to receive the data, you’re out of luck: it won’t.\nIn this kind of scenario, you should instead opt for a `ReplaySubject`, which is able to replay all the events it received to also late subscribers. \n\nIt is particularly useful also when you only want to keep the latest value in memory which you can do by defining its buffer size.\n\nAnother alternative is the `BehaviorSubject` — which instead requires a value in order to be defined.\n\n## 5) Performing imperative logic inside the Subscription callback\n\nOne of the greatest things about RxJs is that combining operators and reusing their logic is an incredibly nice (and easy) way to build reusable bits of code.\n\nMany of the benefits from writing Rx code ends once we subscribe to an Observable: the logic we write within subscription callbacks is not Rx-land and it’s the beginning of the end of FRP in our code.\n\nI am not saying you should never subscribe, of course, but my recommendation is to keep the logic within the subscription callbacks as small as possible — and wherever you can, avoid subscribing directly (for example, using the Angular async pipe).\n\nWhat are the drawbacks of using logic within subscriptions?\n\n### Limited Reusability\n\nRxJS streams are pipeable, which means they can be combined and extended and therefore reused.\n\nAny time you subscribe and perform logic within the subscription, you take away some logic that instead could have been offloaded to an Rx operator:\n\n```typescript\nconst allItems$ = this.service.items$.pipe(\n  filter(Boolean)\n);\n\nconst doneItems$ = allItems$.pipe(\n   map(items =\u003e items.filter(item =\u003e item.done)),\n);\n\nconst numberOfRemainingItems$ = combineLatest(\n  [allItems$, doneItems$]\n).pipe(\n   map(([items, doneItems]) =\u003e items - doneItems),\n);\n```\n\nAs you can see, creating intermediate streams, or offloading logic to separate operators, is an awesome way of reusing logic across your application.\n\nAs a rule of thumb:\n- do not check whether a value is truthy within your subscription, you can easily handle it with the operator `filter(Boolean)`\n- don’t transform data in your subscription\n- side effects: for example, showing/hiding a loading icon, can be done with the `tap` or/and the `finalize` operators\n\n### Less Declarative\n\nLet’s see an example between an imperative and a declarative snippet:\n\n```typescript\nclass UsersDashboardComponent {\n  users: User[];\n  activeUsers: [];\n  bannedUsers: [];\n\n  constructor(private service: UsersService) {\n     this.service.users$.subscribe(users =\u003e {\n        if (users) {\n          this.users = users;\n          this.activeUsers = users.filter(user =\u003e user.active);\n          this.bannedUsers = users.filter(user =\u003e user.banned);\n        }\n     });\n  }\n}\n```\n\nNow, let’s convert the above declarative streams:\n\n```typescript\nclass UsersDashboardComponent {\n  users$ = this.service.users$.pipe(\n    filter(Boolean)\n  );\n\n  activeUsers$ = this.users$.pipe(\n    map(users =\u003e users.filter(user =\u003e user.active)),\n  );\n\n  bannedUsers$ = this.users$.pipe(\n    map(users =\u003e users.filter(user =\u003e user.banned)),\n  );\n\n  constructor(private service: UsersService) {}\n}\n```\n\nWith that said, don’t forget to subscribe either, otherwise, your observables will never emit.\n\n## Final Words\n\nRx is a pretty awesome library and a tool that can help you handle complex asynchronous aspects of your application with ease. It’s also quite big, and most often misunderstood.\n\nMaking sure you follow the recommendations above will at least ensure that you’re taking care of an extremely common cause of mistakes, or bugs that you spend hours trying to fix.\n\nIn summary:\n- Unsubscribe, always\n- Don’t omit an initial value if you expect one\n- Learn well the operators that you’re using. Small differences can lead to big mistakes.\n- Use the right type of `Subject`: they are suited for different use-cases\n- Write as much logic as possible declaratively and within your streams. Also, reuse the logic with custom operators or intermediate streams.","canonical":"https://blog.bitsrc.io/5-common-mistakes-with-rxjs-1b09d4c19387","tags":["rxjs"]},"content":{"compiledSource":"var l=Object.defineProperty,u=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var i=(a,n,s)=\u003en in a?l(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=\u003e{for(var s in n||(n={}))p.call(n,s)\u0026\u0026i(a,s,n[s]);if(o)for(var s of o(n))c.call(n,s)\u0026\u0026i(a,s,n[s]);return a},r=(a,n)=\u003eu(a,N(n));var m=(a,n)=\u003e{var s={};for(var t in a)p.call(a,t)\u0026\u0026n.indexOf(t)\u003c0\u0026\u0026(s[t]=a[t]);if(a!=null\u0026\u0026o)for(var t of o(a))n.indexOf(t)\u003c0\u0026\u0026c.call(a,t)\u0026\u0026(s[t]=a[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=m(t,[\"components\"]);return mdx(MDXLayout,r(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"This post was originally published, by myself, on the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://blog.bitsrc.io/5-common-mistakes-with-rxjs-1b09d4c19387\"}),\"Bit\"),\" blog\"),mdx(\"p\",null,\"As a Consultant, I\\u2019ve had the privilege to work with many teams and projects in a relatively short amount of time.\"),mdx(\"p\",null,\"This not only allowed me to learn a lot from the existing codebases and team members but also to understand the biggest mistakes committed by the teams who weren\\u2019t very familiar with Rx and Angular.\"),mdx(\"h2\",null,\"1) Not Unsubscribing\"),mdx(\"p\",null,\"I and many others have talked at length about the subject, but this is still the most common mistake I normally see \\u2014 i.e. not unsubscribing from a stream at all.\"),mdx(\"p\",null,\"This has various consequences such as:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Causing memory leaks\"),mdx(\"li\",{parentName:\"ul\"},\"Causing unwanted callbacks being called\"),mdx(\"li\",{parentName:\"ul\"},\"Potentially, causing serious bugs in your app\")),mdx(\"p\",null,\"The best and most elegant way to unsubscribe from Observable is using a subject that emits a value when the component is destroyed.\"),mdx(\"p\",null,\"Alternatively, you can maintain a class property on your component with the subscription, and unsubscribe it when the component is destroyed.\"),mdx(\"p\",null,\"It\\u2019s pretty important, don\\u2019t forget.\"),mdx(\"h2\",null,\"2) Omitting an initial value\"),mdx(\"p\",null,\"This happens pretty commonly with Angular forms. Say you subscribe to a stream expecting to get the value \\u2014 but you never get one. How is that possible?\"),mdx(\"p\",null,\"Well \\u2014 sometimes it\\u2019s caused by the fact that the stream was not initialized by an initial value, and an event was never dispatched.\"),mdx(\"p\",null,\"Here\\u2019s a common scenario with Angular\\u2019s forms:\"),mdx(\"div\",e({},{className:\"remark-highlight\"}),mdx(\"pre\",e({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" name \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"new\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token class-name\"}),\"FormControl\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"'Giancarlo'\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" formGroup \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"new\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token class-name\"}),\"FormGroup\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" name \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" valueChanges$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" formGroup\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"valueChanges\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\nvalueChanges`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"subscribe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"value\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// do something\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"Unless the user changes the \",mdx(\"inlineCode\",{parentName:\"p\"},\"name\"),\" FormControl in some way, the callback will never be called.\"),mdx(\"p\",null,\"But \\u2014 we do want the subscription to emit using the initial value of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"FormGroup\"),\" (and many would expect it to do so).\"),mdx(\"p\",null,\"In this case, we need to push an initial value using the operator \",mdx(\"inlineCode\",{parentName:\"p\"},\"startWith\"),\":\"),mdx(\"div\",e({},{className:\"remark-highlight\"}),mdx(\"pre\",e({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" valueChanges$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" formGroup\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"valueChanges\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"startWith\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"formGroup\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"value\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\nvalueChanges`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"subscribe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"value\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// do something\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"In this case, we will receive an emission using the initial value of the form, and all the changes emitted after that.\"),mdx(\"h2\",null,\"3) Using the wrong Operators\"),mdx(\"p\",null,\"There are a lot of operators out there \\u2014 and while you certainly don\\u2019t need to learn them all, you need to make sure you understand the details of each one that you are using.\"),mdx(\"p\",null,\"Small differences can have big consequences.\"),mdx(\"h3\",null,\"Example: mergeMap vs switchMap\"),mdx(\"p\",null,\"One of the most commonly used operators is \",mdx(\"inlineCode\",{parentName:\"p\"},\"mergeMap\"),\". This operator allows you to flatten an inner Observable and will maintain many active streams for each event: this is great in some situations, and not very ideal in others.\"),mdx(\"p\",null,\"In many cases, you may want to instead maintain only 1 active subscription. For example, if you have an event whose events call an HTTP endpoint, you may want to cancel the outgoing requests and only call the very latest one: in this case, you\\u2019ll be better off with \",mdx(\"inlineCode\",{parentName:\"p\"},\"switchMap\"),\".\"),mdx(\"p\",null,\"If you\\u2019re not careful, \",mdx(\"inlineCode\",{parentName:\"p\"},\"mergeMap\"),\" may cause duplicate and unwanted subscriptions, while \",mdx(\"inlineCode\",{parentName:\"p\"},\"switchMap\"),\" can lead to race conditions. Ultimately, both may lead to bugs and your code malfunctioning.\"),mdx(\"p\",null,\"This is one example of the many, sometimes tiny, differences that make RxJS operators.\"),mdx(\"p\",null,\"As I said above \\u2014 you do not need to know every Rx operator. You do need, though, to understand the small peculiarities of the ones you\\u2019re using and compare with similar others to understand which one is suitable in your case.\"),mdx(\"p\",null,\"Other notable differences you should be aware of:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"zip\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"forkJoin\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"combineLatest\"),\" vs r`ace\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"merge\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"combineLatest\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"timer\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"interval\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"never\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"empty\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"of\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"from\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"buffer\"),\" vs \",mdx(\"inlineCode\",{parentName:\"li\"},\"window\"))),mdx(\"h2\",null,\"4) Using the wrong type of Subject\"),mdx(\"p\",null,\"Another important mistake not to commit is to not choose the wrong type of Subject for your task.\"),mdx(\"p\",null,\"Subjects are a special type of Observables that allow you to push values in the stream and also retrieve them by subscribing to it.\"),mdx(\"p\",null,\"While normal \",mdx(\"inlineCode\",{parentName:\"p\"},\"Subject\"),\" likely cover most situations, there are slight differences that you should be aware of.\"),mdx(\"h3\",null,\"Late Subscribers\"),mdx(\"p\",null,\"One common scenario is when your Subject emits events before an observer subscribes to its changes. \"),mdx(\"p\",null,`If you\\u2019re expecting your subscriber to receive the data, you\\u2019re out of luck: it won\\u2019t.\nIn this kind of scenario, you should instead opt for a `,mdx(\"inlineCode\",{parentName:\"p\"},\"ReplaySubject\"),\", which is able to replay all the events it received to also late subscribers. \"),mdx(\"p\",null,\"It is particularly useful also when you only want to keep the latest value in memory which you can do by defining its buffer size.\"),mdx(\"p\",null,\"Another alternative is the \",mdx(\"inlineCode\",{parentName:\"p\"},\"BehaviorSubject\"),\" \\u2014 which instead requires a value in order to be defined.\"),mdx(\"h2\",null,\"5) Performing imperative logic inside the Subscription callback\"),mdx(\"p\",null,\"One of the greatest things about RxJs is that combining operators and reusing their logic is an incredibly nice (and easy) way to build reusable bits of code.\"),mdx(\"p\",null,\"Many of the benefits from writing Rx code ends once we subscribe to an Observable: the logic we write within subscription callbacks is not Rx-land and it\\u2019s the beginning of the end of FRP in our code.\"),mdx(\"p\",null,\"I am not saying you should never subscribe, of course, but my recommendation is to keep the logic within the subscription callbacks as small as possible \\u2014 and wherever you can, avoid subscribing directly (for example, using the Angular async pipe).\"),mdx(\"p\",null,\"What are the drawbacks of using logic within subscriptions?\"),mdx(\"h3\",null,\"Limited Reusability\"),mdx(\"p\",null,\"RxJS streams are pipeable, which means they can be combined and extended and therefore reused.\"),mdx(\"p\",null,\"Any time you subscribe and perform logic within the subscription, you take away some logic that instead could have been offloaded to an Rx operator:\"),mdx(\"div\",e({},{className:\"remark-highlight\"}),mdx(\"pre\",e({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" allItems$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"service\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"items$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"Boolean\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" doneItems$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" allItems$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"items \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" items\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"item \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" item\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"done\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" numberOfRemainingItems$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"combineLatest\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"allItems$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" doneItems$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n   `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"items\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" doneItems\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" items \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"-\"),\" doneItems\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`))),mdx(\"p\",null,\"As you can see, creating intermediate streams, or offloading logic to separate operators, is an awesome way of reusing logic across your application.\"),mdx(\"p\",null,\"As a rule of thumb:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"do not check whether a value is truthy within your subscription, you can easily handle it with the operator \",mdx(\"inlineCode\",{parentName:\"li\"},\"filter(Boolean)\")),mdx(\"li\",{parentName:\"ul\"},\"don\\u2019t transform data in your subscription\"),mdx(\"li\",{parentName:\"ul\"},\"side effects: for example, showing/hiding a loading icon, can be done with the \",mdx(\"inlineCode\",{parentName:\"li\"},\"tap\"),\" or/and the \",mdx(\"inlineCode\",{parentName:\"li\"},\"finalize\"),\" operators\")),mdx(\"h3\",null,\"Less Declarative\"),mdx(\"p\",null,\"Let\\u2019s see an example between an imperative and a declarative snippet:\"),mdx(\"div\",e({},{className:\"remark-highlight\"}),mdx(\"pre\",e({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token class-name\"}),\"UsersDashboardComponent\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  users`,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" User\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  activeUsers`,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  bannedUsers`,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" service\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" UsersService\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n     `,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"service\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"users$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"subscribe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"users \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"if\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n          `,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"users \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n          `,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"activeUsers \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"user \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" user\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"active\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n          `,mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"bannedUsers \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"user \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" user\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"banned\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n     `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"Now, let\\u2019s convert the above declarative streams:\"),mdx(\"div\",e({},{className:\"remark-highlight\"}),mdx(\"pre\",e({parentName:\"div\"},{className:\"language-typescript\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token class-name\"}),\"UsersDashboardComponent\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  users$ `,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"service\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"users$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"Boolean\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  activeUsers$ `,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"users$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"users \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"user \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" user\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"active\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  bannedUsers$ `,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"this\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"users$\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"pipe\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"map\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"users \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" users\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"filter\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"user \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\u003e\"),\" user\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"banned\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"constructor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"private\"),\" service\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" UsersService\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`))),mdx(\"p\",null,\"With that said, don\\u2019t forget to subscribe either, otherwise, your observables will never emit.\"),mdx(\"h2\",null,\"Final Words\"),mdx(\"p\",null,\"Rx is a pretty awesome library and a tool that can help you handle complex asynchronous aspects of your application with ease. It\\u2019s also quite big, and most often misunderstood.\"),mdx(\"p\",null,\"Making sure you follow the recommendations above will at least ensure that you\\u2019re taking care of an extremely common cause of mistakes, or bugs that you spend hours trying to fix.\"),mdx(\"p\",null,\"In summary:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Unsubscribe, always\"),mdx(\"li\",{parentName:\"ul\"},\"Don\\u2019t omit an initial value if you expect one\"),mdx(\"li\",{parentName:\"ul\"},\"Learn well the operators that you\\u2019re using. Small differences can lead to big mistakes.\"),mdx(\"li\",{parentName:\"ul\"},\"Use the right type of \",mdx(\"inlineCode\",{parentName:\"li\"},\"Subject\"),\": they are suited for different use-cases\"),mdx(\"li\",{parentName:\"ul\"},\"Write as much logic as possible declaratively and within your streams. Also, reuse the logic with custom operators or intermediate streams.\")))}MDXContent.isMDXComponent=!0;\n","scope":{}},"series":[],"morePosts":[{"live":true,"readingTime":"2 min read","title":"Testing RxJS timers with Jest","date":"2021-11-11T21:49:22.000Z","slug":"testing-rxjs-timers-with-jest","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"Learn how to test simple time-operators with RxJS and Jest"}],"moreArticles":[{"live":true,"readingTime":"5 min read","title":"A Reactive Enum with Typescript and RxJs","date":"2021-11-11T23:00:00.000Z","slug":"reactive-enum-typescript-rxjs","coverImage":"/assets/images/posts/reactive-enum-ts-rxjs.webp","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"Typescript's template literals' types allow us to generate dynamic and typed code, together. In this article, I want to show how we can build a dynamic reactive enum with TS and RxJS","series":"","tags":["rxjs","typescript"]},{"live":true,"readingTime":"8 min read","title":"Caching RxJS streams into Web Storage","date":"2021-11-10T23:00:00.000Z","slug":"caching-rxjs-streams-into-web-storage","coverImage":"/assets/caching-rxjs-streams.webp","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"In this article I will introduce you to a simple utility that allows you to cache RxJS streams in memory or the browser's storage","series":"","tags":["rxjs"]},{"live":true,"readingTime":"7 min read","title":"RxJS Subjects in Depth","date":"2019-10-15T00:00:00.000Z","slug":"rxjs-subjects-in-depth","coverImage":"https://cdn-images-1.medium.com/max/14720/0*15QkEYFTChBSrv-J","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"Learn how RxJS Subjects are used in real-world applications","tags":["rxjs"]},{"live":true,"readingTime":"9 min read","title":"RxJS Patterns: Efficiency and Performance","date":"2019-09-16T00:00:00.000Z","slug":"rxjs-patterns-efficiency-and-performance","coverImage":"https://cdn-images-1.medium.com/max/8120/0*s2vR3V3jI171miko","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"A rundown of all RxJS operators and techniques you can leverage to avoid needless computation and make your code snappier and faster","tags":["rxjs","performance"]},{"live":true,"readingTime":"5 min read","title":"A simple Countdown with RxJS","date":"2019-06-05T00:00:00.322Z","slug":"a-simple-countdown-with-rx-js","coverImage":"/assets/images/posts/rxjs-countdown.gif","collection":{"name":"RxJs","primaryColor":"#d81b60","primaryColorLight":"#d81b6085","contrastColor":"#fff","logo":"/assets/images/collections/rxjs.webp","slug":"rxjs"},"excerpt":"In this tutorial, we’re going to build a very simple timer application with only a few lines of code using RxJS","tags":["rxjs"]}],"type":1},"__N_SSG":true},"page":"/[collection]/[slug]","query":{"collection":"rxjs","slug":"five-common-mistakes-with-rxjs"},"buildId":"VJR1LKqYQjlR7buPFNI2Z","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script async="" defer="" src="https://www.googletagmanager.com/gtag/js"></script><script id="gtmDataLayer">
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-172483071-1');
</script></body></html>